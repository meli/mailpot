<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Error type."><title>Error in mailpot::errors - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-d1c027e9fb12379c.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mailpot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (3b2073f07 2023-06-17)" data-search-js="search-1e8f84b2d523d42b.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-190c35055d2a8300.js"></script><script defer src="../../static.files/scrape-examples-ef1e698c1d417c0c.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><style>
.rustdoc { flex-wrap: wrap; }
@media (prefers-color-scheme: light) {
    :root {
        --border-primary: #cdcdcd;
        --border-secondary: #cdcdcd;
        --a-normal-text: #034575;
        --a-normal-underline: #bbb;
        --a-visited-underline: #707070;
        --a-hover-bg: #bfbfbf40;
        --a-active-text: #c00;
        --a-active-underline: #c00;
        --accent-primary: #0085f2;
        --accent-primary-engage: #0085f21a;
        --accent-secondary: #0085f2;
        --accent-tertiary: #0085f21a;
        color-scheme: light;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --border-primary: #858585;
        --border-secondary: #696969;
        --a-normal-text: #4db4ff;
        --a-normal-underline: #8b8b8b;
        --a-visited-underline: #707070;
        --a-hover-bg: #bfbfbf40;
        --a-active-text: #c00;
        --a-active-underline: #c00;
        --accent-primary: #5e9eff;
        --accent-primary-engage: #5e9eff1a;
        --accent-secondary: #5e9eff;
        --accent-tertiary: #0085f21a;
        color-scheme: dark;
    }
}

nav.main-nav {
  padding: 0rem 1rem;
  border: 0.1rem solid var(--border-secondary);
  border-left: none;
  border-right: none;
  border-radius: 2px;
  padding: 10px 14px 10px 10px;
  margin-bottom: 10px;
  /*! width: 100%; */
  height: max-content;
  width: 100vw;
}

nav.main-nav * {
  padding: 0;
  margin: 0;
}

nav.main-nav > ul {
  display: flex;
  flex-wrap: wrap;
  row-gap: 1rem;
  list-style: none;
}

nav.main-nav > ul > li > a {
  padding: 1rem;
}
nav.main-nav a[href] {
  text-decoration: underline;
    text-decoration-color: currentcolor;
  color: #034575;
  color: var(--a-normal-text);
  text-decoration-color: #707070;
  text-decoration-color: var(--accent-secondary);
  text-decoration-skip-ink: none;
  font-synthesis: none;
font-feature-settings: "onum" 1;
text-rendering: optimizeLegibility;
font-family: -apple-system,BlinkMacSystemFont,Roboto,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif;
font-size: 1.125em;
}
nav.main-nav > ul > li > a:hover {
  outline: 0.1rem solid;
  outline-offset: -0.5rem;
}
a[href]:focus, a[href]:hover {
  text-decoration-thickness: 2px;
  text-decoration-skip-ink: none;
}
</style>
<nav class="main-nav">
  <ul>
    <li><a href="https://git.meli.delivery/meli/mailpot">Gitea Repository</a></li>
    <li><a href="https://github.com/meli/mailpot">Github Repository</a></li>
    <li><a href="https://lists.meli.delivery/">Official Instance</a></li>
    <li><a href="https://meli.github.io/mailpot/lists/2/">Static Demo</a></li>
  </ul>
</nav>

<nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../mailpot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../mailpot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Error</a></h2><div class="sidebar-elems"><section><h3><a href="#fields">Tuple Fields</a></h3><ul class="block"><li><a href="#structfield.0">0</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.backtrace">backtrace</a></li><li><a href="#method.chain_err">chain_err</a></li><li><a href="#method.description">description</a></li><li><a href="#method.from_kind">from_kind</a></li><li><a href="#method.iter">iter</a></li><li><a href="#method.kind">kind</a></li><li><a href="#method.new_external">new_external</a></li><li><a href="#method.with_boxed_chain">with_boxed_chain</a></li><li><a href="#method.with_chain">with_chain</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-ChainedError-for-Error">ChainedError</a></li><li><a href="#impl-Debug-for-Error">Debug</a></li><li><a href="#impl-Display-for-Error">Display</a></li><li><a href="#impl-Error-for-Error">Error</a></li><li><a href="#impl-From%3C%26'a+str%3E-for-Error">From&lt;&amp;&#x27;a str&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error-1">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error-2">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error-3">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error-4">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-Error-5">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CError%3E-for-ErrorKind">From&lt;Error&gt;</a></li><li><a href="#impl-From%3CErrorKind%3E-for-Error">From&lt;ErrorKind&gt;</a></li><li><a href="#impl-From%3CString%3E-for-Error">From&lt;String&gt;</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-Error">!RefUnwindSafe</a></li><li><a href="#impl-Sync-for-Error">!Sync</a></li><li><a href="#impl-UnwindSafe-for-Error">!UnwindSafe</a></li><li><a href="#impl-Send-for-Error">Send</a></li><li><a href="#impl-Unpin-for-Error">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-Error">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Error">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Error">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Error">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Error">Into&lt;U&gt;</a></li><li><a href="#impl-Provider-for-Error">Provider</a></li><li><a href="#impl-ToString-for-Error">ToString</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Error">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Error">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In mailpot::errors</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">mailpot</a>::<wbr><a href="index.html">errors</a>::<wbr><a class="struct" href="#">Error</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/mailpot/errors.rs.html#28-68">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct Error(pub <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>, _);</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The Error type.</p>
<p>This tuple struct is made of two elements:</p>
<ul>
<li>an <code>ErrorKind</code> which is used to determine the type of the error.</li>
<li>An internal <code>State</code>, not meant for direct use outside of <code>error_chain</code>
internals, containing:
<ul>
<li>a backtrace, generated when the error is created.</li>
<li>an error chain, used for the implementation of <code>Error::cause()</code>.</li>
</ul>
</li>
</ul>
</div></details><h2 id="fields" class="fields small-section-header">Tuple Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.0" class="structfield small-section-header"><a href="#structfield.0" class="anchor field">§</a><code>0: <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a></code></span><div class="docblock"><p>The kind of the error.</p>
</div><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-Error" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from_kind" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.from_kind" class="fn">from_kind</a>(kind: <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>) -&gt; <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h4></section></summary><div class="docblock"><p>Constructs an error from a kind, and generates a backtrace.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_chain" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.with_chain" class="fn">with_chain</a>&lt;E, K&gt;(error: E, kind: K) -&gt; <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a><span class="where fmt-newline">where
    E: <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>&gt;,</span></h4></section></summary><div class="docblock"><p>Constructs a chained error from another error and a kind, and generates a backtrace.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_boxed_chain" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.with_boxed_chain" class="fn">with_boxed_chain</a>&lt;K&gt;(error: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt;, kind: K) -&gt; <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a><span class="where fmt-newline">where
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>&gt;,</span></h4></section></summary><div class="docblock"><p>Construct a chained error from another boxed error and a kind, and generates a backtrace</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.kind" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.kind" class="fn">kind</a>(&amp;self) -&gt; &amp;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a></h4></section></summary><div class="docblock"><p>Returns the kind of the error.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.iter" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.iter" class="fn">iter</a>(&amp;self) -&gt; <a class="struct" href="https://docs.rs/error-chain/0.12.4/error_chain/struct.Iter.html" title="struct error_chain::Iter">Iter</a>&lt;'_&gt;</h4></section></summary><div class="docblock"><p>Iterates over the error chain.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.backtrace" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.backtrace" class="fn">backtrace</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="https://docs.rs/error-chain/0.12.4/error_chain/backtrace/imp/type.Backtrace.html" title="type error_chain::backtrace::imp::Backtrace">Backtrace</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the backtrace associated with this error.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.chain_err" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.chain_err" class="fn">chain_err</a>&lt;F, EK&gt;(self, error: F) -&gt; <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a><span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; EK,
    EK: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>&gt;,</span></h4></section></summary><div class="docblock"><p>Extends the error chain with a new entry.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples"><a href="#scraped-examples">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example " data-locs="[[[9,9],&quot;../../src/mailpot/connection.rs.html#617&quot;,&quot;line 617&quot;],[[50,50],&quot;../../src/mailpot/connection.rs.html#658&quot;,&quot;line 658&quot;]]"><div class="scraped-example-title">core/src/connection.rs (<a href="../../src/mailpot/connection.rs.html#617">line 617</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>608</span>
<span>609</span>
<span>610</span>
<span>611</span>
<span>612</span>
<span>613</span>
<span>614</span>
<span>615</span>
<span>616</span>
<span>617</span>
<span>618</span>
<span>619</span>
<span>620</span>
<span>621</span>
<span>622</span>
<span>623</span>
<span>624</span>
<span>625</span>
<span>626</span>
<span>627</span>
<span>628</span>
<span>629</span>
<span>630</span>
<span>631</span>
<span>632</span>
<span>633</span>
<span>634</span>
<span>635</span>
<span>636</span>
<span>637</span>
<span>638</span>
<span>639</span>
<span>640</span>
<span>641</span>
<span>642</span>
<span>643</span>
<span>644</span>
<span>645</span>
<span>646</span>
<span>647</span>
<span>648</span>
<span>649</span>
<span>650</span>
<span>651</span>
<span>652</span>
<span>653</span>
<span>654</span>
<span>655</span>
<span>656</span>
<span>657</span>
<span>658</span>
<span>659</span>
<span>660</span>
<span>661</span>
<span>662</span>
<span>663</span>
<span>664</span>
<span>665</span>
<span>666</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>remove_list_owner(<span class="kw-2">&amp;</span><span class="self">self</span>, list_pk: i64, owner_pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
        <span class="self">self</span>.connection
            .query_row(
                <span class="string">&quot;DELETE FROM owner WHERE list = ? AND pk = ? RETURNING *;&quot;</span>,
                <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>list_pk, <span class="kw-2">&amp;</span>owner_pk],
                |<span class="kw">_</span>| <span class="prelude-val">Ok</span>(()),
            )
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                    Error::from(err).<span class="highlight focus">chain_err</span>(|| NotFound(<span class="string">&quot;list or list owner not found!&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(())
    }

    <span class="doccomment">/// Add an owner of a mailing list.
    </span><span class="kw">pub fn </span>add_list_owner(<span class="kw-2">&amp;</span><span class="self">self</span>, list_owner: ListOwner) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;ListOwner&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self</span>.connection.prepare(
            <span class="string">&quot;INSERT OR REPLACE INTO owner(list, address, name) VALUES (?, ?, ?) RETURNING *;&quot;</span>,
        )<span class="question-mark">?</span>;
        <span class="kw">let </span>list_pk = list_owner.list;
        <span class="kw">let </span>ret = stmt
            .query_row(
                <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>list_pk, <span class="kw-2">&amp;</span>list_owner.address, <span class="kw-2">&amp;</span>list_owner.name,],
                |row| {
                    <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                    <span class="prelude-val">Ok</span>(DbVal(
                        ListOwner {
                            pk,
                            list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                            address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                            name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        },
                        pk,
                    ))
                },
            )
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(
                    err,
                    rusqlite::Error::SqliteFailure(
                        rusqlite::ffi::Error {
                            code: rusqlite::ffi::ErrorCode::ConstraintViolation,
                            extended_code: <span class="number">787
                        </span>},
                        <span class="kw">_
                    </span>)
                ) {
                    Error::from(err).<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;Could not find a list with this pk.&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;

        <span class="macro">trace!</span>(<span class="string">&quot;add_list_owner {:?}.&quot;</span>, <span class="kw-2">&amp;</span>ret);
        <span class="prelude-val">Ok</span>(ret)
    }</code></pre></div></div></div><details class="toggle more-examples-toggle"><summary class="hideme"><span>More examples</span></summary><div class="hide-more">Hide additional examples</div><div class="more-scraped-examples"><div class="toggle-line"><div class="toggle-line-inner"></div></div><div class="scraped-example " data-locs="[[[7,7],&quot;../../src/mailpot/policies.rs.html#139&quot;,&quot;line 139&quot;],[[74,74],&quot;../../src/mailpot/policies.rs.html#206&quot;,&quot;line 206&quot;],[[202,202],&quot;../../src/mailpot/policies.rs.html#334&quot;,&quot;line 334&quot;],[[267,267],&quot;../../src/mailpot/policies.rs.html#399&quot;,&quot;line 399&quot;]]"><div class="scraped-example-title">core/src/policies.rs (<a href="../../src/mailpot/policies.rs.html#139">line 139</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>132</span>
<span>133</span>
<span>134</span>
<span>135</span>
<span>136</span>
<span>137</span>
<span>138</span>
<span>139</span>
<span>140</span>
<span>141</span>
<span>142</span>
<span>143</span>
<span>144</span>
<span>145</span>
<span>146</span>
<span>147</span>
<span>148</span>
<span>149</span>
<span>150</span>
<span>151</span>
<span>152</span>
<span>153</span>
<span>154</span>
<span>155</span>
<span>156</span>
<span>157</span>
<span>158</span>
<span>159</span>
<span>160</span>
<span>161</span>
<span>162</span>
<span>163</span>
<span>164</span>
<span>165</span>
<span>166</span>
<span>167</span>
<span>168</span>
<span>169</span>
<span>170</span>
<span>171</span>
<span>172</span>
<span>173</span>
<span>174</span>
<span>175</span>
<span>176</span>
<span>177</span>
<span>178</span>
<span>179</span>
<span>180</span>
<span>181</span>
<span>182</span>
<span>183</span>
<span>184</span>
<span>185</span>
<span>186</span>
<span>187</span>
<span>188</span>
<span>189</span>
<span>190</span>
<span>191</span>
<span>192</span>
<span>193</span>
<span>194</span>
<span>195</span>
<span>196</span>
<span>197</span>
<span>198</span>
<span>199</span>
<span>200</span>
<span>201</span>
<span>202</span>
<span>203</span>
<span>204</span>
<span>205</span>
<span>206</span>
<span>207</span>
<span>208</span>
<span>209</span>
<span>210</span>
<span>211</span>
<span>212</span>
<span>213</span>
<span>214</span>
<span>215</span>
<span>216</span>
<span>217</span>
<span>218</span>
<span>219</span>
<span>220</span>
<span>221</span>
<span>222</span>
<span>223</span>
<span>224</span>
<span>225</span>
<span>226</span>
<span>227</span>
<span>228</span>
<span>229</span>
<span>230</span>
<span>231</span>
<span>232</span>
<span>233</span>
<span>234</span>
<span>235</span>
<span>236</span>
<span>237</span>
<span>238</span>
<span>239</span>
<span>240</span>
<span>241</span>
<span>242</span>
<span>243</span>
<span>244</span>
<span>245</span>
<span>246</span>
<span>247</span>
<span>248</span>
<span>249</span>
<span>250</span>
<span>251</span>
<span>252</span>
<span>253</span>
<span>254</span>
<span>255</span>
<span>256</span>
<span>257</span>
<span>258</span>
<span>259</span>
<span>260</span>
<span>261</span>
<span>262</span>
<span>263</span>
<span>264</span>
<span>265</span>
<span>266</span>
<span>267</span>
<span>268</span>
<span>269</span>
<span>270</span>
<span>271</span>
<span>272</span>
<span>273</span>
<span>274</span>
<span>275</span>
<span>276</span>
<span>277</span>
<span>278</span>
<span>279</span>
<span>280</span>
<span>281</span>
<span>282</span>
<span>283</span>
<span>284</span>
<span>285</span>
<span>286</span>
<span>287</span>
<span>288</span>
<span>289</span>
<span>290</span>
<span>291</span>
<span>292</span>
<span>293</span>
<span>294</span>
<span>295</span>
<span>296</span>
<span>297</span>
<span>298</span>
<span>299</span>
<span>300</span>
<span>301</span>
<span>302</span>
<span>303</span>
<span>304</span>
<span>305</span>
<span>306</span>
<span>307</span>
<span>308</span>
<span>309</span>
<span>310</span>
<span>311</span>
<span>312</span>
<span>313</span>
<span>314</span>
<span>315</span>
<span>316</span>
<span>317</span>
<span>318</span>
<span>319</span>
<span>320</span>
<span>321</span>
<span>322</span>
<span>323</span>
<span>324</span>
<span>325</span>
<span>326</span>
<span>327</span>
<span>328</span>
<span>329</span>
<span>330</span>
<span>331</span>
<span>332</span>
<span>333</span>
<span>334</span>
<span>335</span>
<span>336</span>
<span>337</span>
<span>338</span>
<span>339</span>
<span>340</span>
<span>341</span>
<span>342</span>
<span>343</span>
<span>344</span>
<span>345</span>
<span>346</span>
<span>347</span>
<span>348</span>
<span>349</span>
<span>350</span>
<span>351</span>
<span>352</span>
<span>353</span>
<span>354</span>
<span>355</span>
<span>356</span>
<span>357</span>
<span>358</span>
<span>359</span>
<span>360</span>
<span>361</span>
<span>362</span>
<span>363</span>
<span>364</span>
<span>365</span>
<span>366</span>
<span>367</span>
<span>368</span>
<span>369</span>
<span>370</span>
<span>371</span>
<span>372</span>
<span>373</span>
<span>374</span>
<span>375</span>
<span>376</span>
<span>377</span>
<span>378</span>
<span>379</span>
<span>380</span>
<span>381</span>
<span>382</span>
<span>383</span>
<span>384</span>
<span>385</span>
<span>386</span>
<span>387</span>
<span>388</span>
<span>389</span>
<span>390</span>
<span>391</span>
<span>392</span>
<span>393</span>
<span>394</span>
<span>395</span>
<span>396</span>
<span>397</span>
<span>398</span>
<span>399</span>
<span>400</span>
<span>401</span>
<span>402</span>
<span>403</span>
<span>404</span>
<span>405</span>
<span>406</span>
<span>407</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>        <span class="kw">pub fn </span>remove_list_post_policy(<span class="kw-2">&amp;</span><span class="self">self</span>, list_pk: i64, policy_pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
            <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
                </span>.connection
                .prepare(<span class="string">&quot;DELETE FROM post_policy WHERE pk = ? AND list = ? RETURNING *;&quot;</span>)<span class="question-mark">?</span>;
            stmt.query_row(<span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>policy_pk, <span class="kw-2">&amp;</span>list_pk,], |<span class="kw">_</span>| <span class="prelude-val">Ok</span>(()))
                .map_err(|err| {
                    <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                        Error::from(err).<span class="highlight focus">chain_err</span>(|| NotFound(<span class="string">&quot;list or list policy not found!&quot;</span>))
                    } <span class="kw">else </span>{
                        err.into()
                    }
                })<span class="question-mark">?</span>;

            <span class="macro">trace!</span>(<span class="string">&quot;remove_list_post_policy {} {}.&quot;</span>, list_pk, policy_pk);
            <span class="prelude-val">Ok</span>(())
        }

        <span class="doccomment">/// Set the unique post policy for a list.
        </span><span class="kw">pub fn </span>set_list_post_policy(<span class="kw-2">&amp;</span><span class="self">self</span>, policy: PostPolicy) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;PostPolicy&gt;&gt; {
            <span class="kw">if </span>!(policy.announce_only
                || policy.subscription_only
                || policy.approval_needed
                || policy.open
                || policy.custom)
            {
                <span class="kw">return </span><span class="prelude-val">Err</span>(
                    <span class="string">&quot;Cannot add empty policy. Having no policies is probably what you want to do.&quot;
                        </span>.into(),
                );
            }
            <span class="kw">let </span>list_pk = policy.list;

            <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self</span>.connection.prepare(
                <span class="string">&quot;INSERT OR REPLACE INTO post_policy(list, announce_only, subscription_only, \
                 approval_needed, open, custom) VALUES (?, ?, ?, ?, ?, ?) RETURNING *;&quot;</span>,
            )<span class="question-mark">?</span>;
            <span class="kw">let </span>ret = stmt
                .query_row(
                    <span class="macro">rusqlite::params!</span>[
                        <span class="kw-2">&amp;</span>list_pk,
                        <span class="kw-2">&amp;</span>policy.announce_only,
                        <span class="kw-2">&amp;</span>policy.subscription_only,
                        <span class="kw-2">&amp;</span>policy.approval_needed,
                        <span class="kw-2">&amp;</span>policy.open,
                        <span class="kw-2">&amp;</span>policy.custom,
                    ],
                    |row| {
                        <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                        <span class="prelude-val">Ok</span>(DbVal(
                            PostPolicy {
                                pk,
                                list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                                announce_only: row.get(<span class="string">&quot;announce_only&quot;</span>)<span class="question-mark">?</span>,
                                subscription_only: row.get(<span class="string">&quot;subscription_only&quot;</span>)<span class="question-mark">?</span>,
                                approval_needed: row.get(<span class="string">&quot;approval_needed&quot;</span>)<span class="question-mark">?</span>,
                                open: row.get(<span class="string">&quot;open&quot;</span>)<span class="question-mark">?</span>,
                                custom: row.get(<span class="string">&quot;custom&quot;</span>)<span class="question-mark">?</span>,
                            },
                            pk,
                        ))
                    },
                )
                .map_err(|err| {
                    <span class="kw">if </span><span class="macro">matches!</span>(
                        err,
                        rusqlite::Error::SqliteFailure(
                            rusqlite::ffi::Error {
                                code: rusqlite::ffi::ErrorCode::ConstraintViolation,
                                extended_code: <span class="number">787
                            </span>},
                            <span class="kw">_
                        </span>)
                    ) {
                        Error::from(err)
                            .<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;Could not find a list with this pk.&quot;</span>))
                    } <span class="kw">else </span>{
                        err.into()
                    }
                })<span class="question-mark">?</span>;

            <span class="macro">trace!</span>(<span class="string">&quot;set_list_post_policy {:?}.&quot;</span>, <span class="kw-2">&amp;</span>ret);
            <span class="prelude-val">Ok</span>(ret)
        }
    }
}

<span class="kw">mod </span>subscription_policy {
    <span class="kw">use </span>log::trace;
    <span class="kw">use </span>rusqlite::OptionalExtension;

    <span class="kw">use crate</span>::{
        errors::{ErrorKind::<span class="kw-2">*</span>, <span class="kw-2">*</span>},
        models::{DbVal, SubscriptionPolicy},
        Connection,
    };

    <span class="kw">impl </span>Connection {
        <span class="doccomment">/// Fetch the subscription policy of a mailing list.
        </span><span class="kw">pub fn </span>list_subscription_policy(
            <span class="kw-2">&amp;</span><span class="self">self</span>,
            pk: i64,
        ) -&gt; <span class="prelude-ty">Result</span>&lt;<span class="prelude-ty">Option</span>&lt;DbVal&lt;SubscriptionPolicy&gt;&gt;&gt; {
            <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
                </span>.connection
                .prepare(<span class="string">&quot;SELECT * FROM subscription_policy WHERE list = ?;&quot;</span>)<span class="question-mark">?</span>;
            <span class="kw">let </span>ret = stmt
                .query_row([<span class="kw-2">&amp;</span>pk], |row| {
                    <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                    <span class="prelude-val">Ok</span>(DbVal(
                        SubscriptionPolicy {
                            pk,
                            list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                            send_confirmation: row.get(<span class="string">&quot;send_confirmation&quot;</span>)<span class="question-mark">?</span>,
                            open: row.get(<span class="string">&quot;open&quot;</span>)<span class="question-mark">?</span>,
                            manual: row.get(<span class="string">&quot;manual&quot;</span>)<span class="question-mark">?</span>,
                            request: row.get(<span class="string">&quot;request&quot;</span>)<span class="question-mark">?</span>,
                            custom: row.get(<span class="string">&quot;custom&quot;</span>)<span class="question-mark">?</span>,
                        },
                        pk,
                    ))
                })
                .optional()<span class="question-mark">?</span>;

            <span class="prelude-val">Ok</span>(ret)
        }

        <span class="doccomment">/// Remove an existing subscription policy.
        ///
        /// # Examples
        ///
        /// ```
        /// # use mailpot::{models::*, Configuration, Connection, SendMail};
        /// # use tempfile::TempDir;
        /// #
        /// # let tmp_dir = TempDir::new().unwrap();
        /// # let db_path = tmp_dir.path().join(&quot;mpot.db&quot;);
        /// # let config = Configuration {
        /// #     send_mail: SendMail::ShellCommand(&quot;/usr/bin/false&quot;.to_string()),
        /// #     db_path: db_path.clone(),
        /// #     data_path: tmp_dir.path().to_path_buf(),
        /// #     administrators: vec![],
        /// # };
        /// #
        /// # fn do_test(config: Configuration) {
        /// let db = Connection::open_or_create_db(config).unwrap().trusted();
        /// let list = db
        ///     .create_list(MailingList {
        ///         pk: 0,
        ///         name: &quot;foobar chat&quot;.into(),
        ///         id: &quot;foo-chat&quot;.into(),
        ///         address: &quot;foo-chat@example.com&quot;.into(),
        ///         description: None,
        ///         topics: vec![],
        ///         archive_url: None,
        ///     })
        ///     .unwrap();
        /// # assert!(db.list_subscription_policy(list.pk()).unwrap().is_none());
        /// let pol = db
        ///     .set_list_subscription_policy(SubscriptionPolicy {
        ///         pk: -1,
        ///         list: list.pk(),
        ///         send_confirmation: false,
        ///         open: true,
        ///         manual: false,
        ///         request: false,
        ///         custom: false,
        ///     })
        ///     .unwrap();
        /// # assert_eq!(db.list_subscription_policy(list.pk()).unwrap().as_ref(), Some(&amp;pol));
        /// db.remove_list_subscription_policy(list.pk(), pol.pk())
        ///     .unwrap();
        /// # assert!(db.list_subscription_policy(list.pk()).unwrap().is_none());
        /// # }
        /// # do_test(config);
        /// ```
        ///
        /// ```should_panic
        /// # use mailpot::{models::*, Configuration, Connection, SendMail};
        /// # use tempfile::TempDir;
        /// #
        /// # let tmp_dir = TempDir::new().unwrap();
        /// # let db_path = tmp_dir.path().join(&quot;mpot.db&quot;);
        /// # let config = Configuration {
        /// #     send_mail: SendMail::ShellCommand(&quot;/usr/bin/false&quot;.to_string()),
        /// #     db_path: db_path.clone(),
        /// #     data_path: tmp_dir.path().to_path_buf(),
        /// #     administrators: vec![],
        /// # };
        /// #
        /// # fn do_test(config: Configuration) {
        /// let db = Connection::open_or_create_db(config).unwrap().trusted();
        /// db.remove_list_post_policy(1, 1).unwrap();
        /// # }
        /// # do_test(config);
        /// ```
        </span><span class="kw">pub fn </span>remove_list_subscription_policy(<span class="kw-2">&amp;</span><span class="self">self</span>, list_pk: i64, policy_pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
            <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self</span>.connection.prepare(
                <span class="string">&quot;DELETE FROM subscription_policy WHERE pk = ? AND list = ? RETURNING *;&quot;</span>,
            )<span class="question-mark">?</span>;
            stmt.query_row(<span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>policy_pk, <span class="kw-2">&amp;</span>list_pk,], |<span class="kw">_</span>| <span class="prelude-val">Ok</span>(()))
                .map_err(|err| {
                    <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                        Error::from(err).<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;list or list policy not found!&quot;</span>))
                    } <span class="kw">else </span>{
                        err.into()
                    }
                })<span class="question-mark">?</span>;

            <span class="macro">trace!</span>(<span class="string">&quot;remove_list_subscription_policy {} {}.&quot;</span>, list_pk, policy_pk);
            <span class="prelude-val">Ok</span>(())
        }

        <span class="doccomment">/// Set the unique post policy for a list.
        </span><span class="kw">pub fn </span>set_list_subscription_policy(
            <span class="kw-2">&amp;</span><span class="self">self</span>,
            policy: SubscriptionPolicy,
        ) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;SubscriptionPolicy&gt;&gt; {
            <span class="kw">if </span>!(policy.open || policy.manual || policy.request || policy.custom) {
                <span class="kw">return </span><span class="prelude-val">Err</span>(
                    <span class="string">&quot;Cannot add empty policy. Having no policy is probably what you want to do.&quot;
                        </span>.into(),
                );
            }
            <span class="kw">let </span>list_pk = policy.list;

            <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self</span>.connection.prepare(
                <span class="string">&quot;INSERT OR REPLACE INTO subscription_policy(list, send_confirmation, open, \
                 manual, request, custom) VALUES (?, ?, ?, ?, ?, ?) RETURNING *;&quot;</span>,
            )<span class="question-mark">?</span>;
            <span class="kw">let </span>ret = stmt
                .query_row(
                    <span class="macro">rusqlite::params!</span>[
                        <span class="kw-2">&amp;</span>list_pk,
                        <span class="kw-2">&amp;</span>policy.send_confirmation,
                        <span class="kw-2">&amp;</span>policy.open,
                        <span class="kw-2">&amp;</span>policy.manual,
                        <span class="kw-2">&amp;</span>policy.request,
                        <span class="kw-2">&amp;</span>policy.custom,
                    ],
                    |row| {
                        <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                        <span class="prelude-val">Ok</span>(DbVal(
                            SubscriptionPolicy {
                                pk,
                                list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                                send_confirmation: row.get(<span class="string">&quot;send_confirmation&quot;</span>)<span class="question-mark">?</span>,
                                open: row.get(<span class="string">&quot;open&quot;</span>)<span class="question-mark">?</span>,
                                manual: row.get(<span class="string">&quot;manual&quot;</span>)<span class="question-mark">?</span>,
                                request: row.get(<span class="string">&quot;request&quot;</span>)<span class="question-mark">?</span>,
                                custom: row.get(<span class="string">&quot;custom&quot;</span>)<span class="question-mark">?</span>,
                            },
                            pk,
                        ))
                    },
                )
                .map_err(|err| {
                    <span class="kw">if </span><span class="macro">matches!</span>(
                        err,
                        rusqlite::Error::SqliteFailure(
                            rusqlite::ffi::Error {
                                code: rusqlite::ffi::ErrorCode::ConstraintViolation,
                                extended_code: <span class="number">787
                            </span>},
                            <span class="kw">_
                        </span>)
                    ) {
                        Error::from(err)
                            .<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;Could not find a list with this pk.&quot;</span>))
                    } <span class="kw">else </span>{
                        err.into()
                    }
                })<span class="question-mark">?</span>;

            <span class="macro">trace!</span>(<span class="string">&quot;set_list_subscription_policy {:?}.&quot;</span>, <span class="kw-2">&amp;</span>ret);
            <span class="prelude-val">Ok</span>(ret)
        }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[24,24],&quot;../../src/mailpot/posts.rs.html#115&quot;,&quot;line 115&quot;]]"><div class="scraped-example-title">core/src/posts.rs (<a href="../../src/mailpot/posts.rs.html#115">line 115</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
<span>97</span>
<span>98</span>
<span>99</span>
<span>100</span>
<span>101</span>
<span>102</span>
<span>103</span>
<span>104</span>
<span>105</span>
<span>106</span>
<span>107</span>
<span>108</span>
<span>109</span>
<span>110</span>
<span>111</span>
<span>112</span>
<span>113</span>
<span>114</span>
<span>115</span>
<span>116</span>
<span>117</span>
<span>118</span>
<span>119</span>
<span>120</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>post(<span class="kw-2">&amp;</span><span class="self">self</span>, env: <span class="kw-2">&amp;</span>Envelope, raw: <span class="kw-2">&amp;</span>[u8], _dry_run: bool) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
        <span class="kw">let </span>result = <span class="self">self</span>.inner_post(env, raw, _dry_run);
        <span class="kw">if let </span><span class="prelude-val">Err</span>(err) = result {
            <span class="kw">return match </span><span class="self">self</span>.insert_to_queue(QueueEntry::new(
                Queue::Error,
                <span class="prelude-val">None</span>,
                <span class="prelude-val">Some</span>(Cow::Borrowed(env)),
                raw,
                <span class="prelude-val">Some</span>(err.to_string()),
            )<span class="question-mark">?</span>) {
                <span class="prelude-val">Ok</span>(idx) =&gt; {
                    <span class="macro">log::info!</span>(
                        <span class="string">&quot;Inserted mail from {:?} into error_queue at index {}&quot;</span>,
                        env.from(),
                        idx
                    );
                    <span class="prelude-val">Err</span>(err)
                }
                <span class="prelude-val">Err</span>(err2) =&gt; {
                    <span class="macro">log::error!</span>(
                        <span class="string">&quot;Could not insert mail from {:?} into error_queue: {err2}&quot;</span>,
                        env.from(),
                    );

                    <span class="prelude-val">Err</span>(err.<span class="highlight focus">chain_err</span>(|| err2))
                }
            };
        }
        result
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[22,22],&quot;../../src/mailpot/subscriptions.rs.html#246&quot;,&quot;line 246&quot;],[[80,80],&quot;../../src/mailpot/subscriptions.rs.html#304&quot;,&quot;line 304&quot;],[[316,316],&quot;../../src/mailpot/subscriptions.rs.html#540&quot;,&quot;line 540&quot;]]"><div class="scraped-example-title">core/src/subscriptions.rs (<a href="../../src/mailpot/subscriptions.rs.html#246">line 246</a>)</div><div class="code-wrapper"><button class="prev">&pr;</button> <button class="next">&sc;</button><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>224</span>
<span>225</span>
<span>226</span>
<span>227</span>
<span>228</span>
<span>229</span>
<span>230</span>
<span>231</span>
<span>232</span>
<span>233</span>
<span>234</span>
<span>235</span>
<span>236</span>
<span>237</span>
<span>238</span>
<span>239</span>
<span>240</span>
<span>241</span>
<span>242</span>
<span>243</span>
<span>244</span>
<span>245</span>
<span>246</span>
<span>247</span>
<span>248</span>
<span>249</span>
<span>250</span>
<span>251</span>
<span>252</span>
<span>253</span>
<span>254</span>
<span>255</span>
<span>256</span>
<span>257</span>
<span>258</span>
<span>259</span>
<span>260</span>
<span>261</span>
<span>262</span>
<span>263</span>
<span>264</span>
<span>265</span>
<span>266</span>
<span>267</span>
<span>268</span>
<span>269</span>
<span>270</span>
<span>271</span>
<span>272</span>
<span>273</span>
<span>274</span>
<span>275</span>
<span>276</span>
<span>277</span>
<span>278</span>
<span>279</span>
<span>280</span>
<span>281</span>
<span>282</span>
<span>283</span>
<span>284</span>
<span>285</span>
<span>286</span>
<span>287</span>
<span>288</span>
<span>289</span>
<span>290</span>
<span>291</span>
<span>292</span>
<span>293</span>
<span>294</span>
<span>295</span>
<span>296</span>
<span>297</span>
<span>298</span>
<span>299</span>
<span>300</span>
<span>301</span>
<span>302</span>
<span>303</span>
<span>304</span>
<span>305</span>
<span>306</span>
<span>307</span>
<span>308</span>
<span>309</span>
<span>310</span>
<span>311</span>
<span>312</span>
<span>313</span>
<span>314</span>
<span>315</span>
<span>316</span>
<span>317</span>
<span>318</span>
<span>319</span>
<span>320</span>
<span>321</span>
<span>322</span>
<span>323</span>
<span>324</span>
<span>325</span>
<span>326</span>
<span>327</span>
<span>328</span>
<span>329</span>
<span>330</span>
<span>331</span>
<span>332</span>
<span>333</span>
<span>334</span>
<span>335</span>
<span>336</span>
<span>337</span>
<span>338</span>
<span>339</span>
<span>340</span>
<span>341</span>
<span>342</span>
<span>343</span>
<span>344</span>
<span>345</span>
<span>346</span>
<span>347</span>
<span>348</span>
<span>349</span>
<span>350</span>
<span>351</span>
<span>352</span>
<span>353</span>
<span>354</span>
<span>355</span>
<span>356</span>
<span>357</span>
<span>358</span>
<span>359</span>
<span>360</span>
<span>361</span>
<span>362</span>
<span>363</span>
<span>364</span>
<span>365</span>
<span>366</span>
<span>367</span>
<span>368</span>
<span>369</span>
<span>370</span>
<span>371</span>
<span>372</span>
<span>373</span>
<span>374</span>
<span>375</span>
<span>376</span>
<span>377</span>
<span>378</span>
<span>379</span>
<span>380</span>
<span>381</span>
<span>382</span>
<span>383</span>
<span>384</span>
<span>385</span>
<span>386</span>
<span>387</span>
<span>388</span>
<span>389</span>
<span>390</span>
<span>391</span>
<span>392</span>
<span>393</span>
<span>394</span>
<span>395</span>
<span>396</span>
<span>397</span>
<span>398</span>
<span>399</span>
<span>400</span>
<span>401</span>
<span>402</span>
<span>403</span>
<span>404</span>
<span>405</span>
<span>406</span>
<span>407</span>
<span>408</span>
<span>409</span>
<span>410</span>
<span>411</span>
<span>412</span>
<span>413</span>
<span>414</span>
<span>415</span>
<span>416</span>
<span>417</span>
<span>418</span>
<span>419</span>
<span>420</span>
<span>421</span>
<span>422</span>
<span>423</span>
<span>424</span>
<span>425</span>
<span>426</span>
<span>427</span>
<span>428</span>
<span>429</span>
<span>430</span>
<span>431</span>
<span>432</span>
<span>433</span>
<span>434</span>
<span>435</span>
<span>436</span>
<span>437</span>
<span>438</span>
<span>439</span>
<span>440</span>
<span>441</span>
<span>442</span>
<span>443</span>
<span>444</span>
<span>445</span>
<span>446</span>
<span>447</span>
<span>448</span>
<span>449</span>
<span>450</span>
<span>451</span>
<span>452</span>
<span>453</span>
<span>454</span>
<span>455</span>
<span>456</span>
<span>457</span>
<span>458</span>
<span>459</span>
<span>460</span>
<span>461</span>
<span>462</span>
<span>463</span>
<span>464</span>
<span>465</span>
<span>466</span>
<span>467</span>
<span>468</span>
<span>469</span>
<span>470</span>
<span>471</span>
<span>472</span>
<span>473</span>
<span>474</span>
<span>475</span>
<span>476</span>
<span>477</span>
<span>478</span>
<span>479</span>
<span>480</span>
<span>481</span>
<span>482</span>
<span>483</span>
<span>484</span>
<span>485</span>
<span>486</span>
<span>487</span>
<span>488</span>
<span>489</span>
<span>490</span>
<span>491</span>
<span>492</span>
<span>493</span>
<span>494</span>
<span>495</span>
<span>496</span>
<span>497</span>
<span>498</span>
<span>499</span>
<span>500</span>
<span>501</span>
<span>502</span>
<span>503</span>
<span>504</span>
<span>505</span>
<span>506</span>
<span>507</span>
<span>508</span>
<span>509</span>
<span>510</span>
<span>511</span>
<span>512</span>
<span>513</span>
<span>514</span>
<span>515</span>
<span>516</span>
<span>517</span>
<span>518</span>
<span>519</span>
<span>520</span>
<span>521</span>
<span>522</span>
<span>523</span>
<span>524</span>
<span>525</span>
<span>526</span>
<span>527</span>
<span>528</span>
<span>529</span>
<span>530</span>
<span>531</span>
<span>532</span>
<span>533</span>
<span>534</span>
<span>535</span>
<span>536</span>
<span>537</span>
<span>538</span>
<span>539</span>
<span>540</span>
<span>541</span>
<span>542</span>
<span>543</span>
<span>544</span>
<span>545</span>
<span>546</span>
<span>547</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>candidate_subscription(<span class="kw-2">&amp;</span><span class="self">self</span>, pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;ListCandidateSubscription&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(<span class="string">&quot;SELECT * FROM candidate_subscription WHERE pk = ?;&quot;</span>)<span class="question-mark">?</span>;
        <span class="kw">let </span>val = stmt
            .query_row(<span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>pk], |row| {
                <span class="kw">let </span>_pk: i64 = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                <span class="macro">debug_assert_eq!</span>(pk, _pk);
                <span class="prelude-val">Ok</span>(DbVal(
                    ListCandidateSubscription {
                        pk,
                        list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                        address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                        name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        accepted: row.get(<span class="string">&quot;accepted&quot;</span>)<span class="question-mark">?</span>,
                    },
                    pk,
                ))
            })
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                    Error::from(err)
                        .<span class="highlight focus">chain_err</span>(|| NotFound(<span class="string">&quot;Candidate subscription with this pk not found!&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;

        <span class="prelude-val">Ok</span>(val)
    }

    <span class="doccomment">/// Accept subscription candidate.
    </span><span class="kw">pub fn </span>accept_candidate_subscription(<span class="kw-2">&amp;</span><span class="self">self</span>, pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;ListSubscription&gt;&gt; {
        <span class="kw">let </span>val = <span class="self">self</span>.connection.query_row(
            <span class="string">&quot;INSERT INTO subscription(list, address, name, enabled, digest, verified, \
             hide_address, receive_duplicates, receive_own_posts, receive_confirmation) SELECT \
             list, address, name, 1, 0, 0, 0, 1, 1, 0 FROM candidate_subscription WHERE pk = ? \
             RETURNING *;&quot;</span>,
            <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>pk],
            |row| {
                <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                <span class="prelude-val">Ok</span>(DbVal(
                    ListSubscription {
                        pk,
                        list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                        address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                        account: row.get(<span class="string">&quot;account&quot;</span>)<span class="question-mark">?</span>,
                        name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        digest: row.get(<span class="string">&quot;digest&quot;</span>)<span class="question-mark">?</span>,
                        enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                        verified: row.get(<span class="string">&quot;verified&quot;</span>)<span class="question-mark">?</span>,
                        hide_address: row.get(<span class="string">&quot;hide_address&quot;</span>)<span class="question-mark">?</span>,
                        receive_duplicates: row.get(<span class="string">&quot;receive_duplicates&quot;</span>)<span class="question-mark">?</span>,
                        receive_own_posts: row.get(<span class="string">&quot;receive_own_posts&quot;</span>)<span class="question-mark">?</span>,
                        receive_confirmation: row.get(<span class="string">&quot;receive_confirmation&quot;</span>)<span class="question-mark">?</span>,
                    },
                    pk,
                ))
            },
        )<span class="question-mark">?</span>;

        <span class="macro">trace!</span>(<span class="string">&quot;accept_candidate_subscription {:?}.&quot;</span>, <span class="kw-2">&amp;</span>val);
        <span class="comment">// table entry might be modified by triggers, so don&#39;t rely on RETURNING value.
        </span><span class="kw">let </span>ret = <span class="self">self</span>.list_subscription(val.list, val.pk())<span class="question-mark">?</span>;

        <span class="comment">// assert that [ref:accept_candidate] trigger works.
        </span><span class="macro">debug_assert_eq!</span>(<span class="prelude-val">Some</span>(ret.pk), <span class="self">self</span>.candidate_subscription(pk)<span class="question-mark">?</span>.accepted);
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Remove a subscription by their address.
    </span><span class="kw">pub fn </span>remove_subscription(<span class="kw-2">&amp;</span><span class="self">self</span>, list_pk: i64, address: <span class="kw-2">&amp;</span>str) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
        <span class="self">self</span>.connection
            .query_row(
                <span class="string">&quot;DELETE FROM subscription WHERE list = ? AND address = ? RETURNING *;&quot;</span>,
                <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>list_pk, <span class="kw-2">&amp;</span>address],
                |<span class="kw">_</span>| <span class="prelude-val">Ok</span>(()),
            )
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                    Error::from(err).<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;list or list owner not found!&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;

        <span class="prelude-val">Ok</span>(())
    }

    <span class="doccomment">/// Update a mailing list subscription.
    </span><span class="kw">pub fn </span>update_subscription(<span class="kw-2">&amp;</span><span class="self">self</span>, change_set: ListSubscriptionChangeset) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
        <span class="kw">let </span>pk = <span class="self">self
            </span>.list_subscription_by_address(change_set.list, <span class="kw-2">&amp;</span>change_set.address)<span class="question-mark">?
            </span>.pk;
        <span class="kw">if </span><span class="macro">matches!</span>(
            change_set,
            ListSubscriptionChangeset {
                list: <span class="kw">_</span>,
                address: <span class="kw">_</span>,
                account: <span class="prelude-val">None</span>,
                name: <span class="prelude-val">None</span>,
                digest: <span class="prelude-val">None</span>,
                verified: <span class="prelude-val">None</span>,
                hide_address: <span class="prelude-val">None</span>,
                receive_duplicates: <span class="prelude-val">None</span>,
                receive_own_posts: <span class="prelude-val">None</span>,
                receive_confirmation: <span class="prelude-val">None</span>,
                enabled: <span class="prelude-val">None</span>,
            }
        ) {
            <span class="kw">return </span><span class="prelude-val">Ok</span>(());
        }

        <span class="kw">let </span>ListSubscriptionChangeset {
            list,
            address: <span class="kw">_</span>,
            name,
            account,
            digest,
            enabled,
            verified,
            hide_address,
            receive_duplicates,
            receive_own_posts,
            receive_confirmation,
        } = change_set;
        <span class="kw">let </span>tx = <span class="self">self</span>.savepoint(<span class="prelude-val">Some</span>(<span class="macro">stringify!</span>(update_subscription)))<span class="question-mark">?</span>;

        <span class="macro">macro_rules! </span>update {
            (<span class="macro-nonterminal">$field</span>:tt) =&gt; {{
                <span class="kw">if let </span><span class="prelude-val">Some</span>(<span class="macro-nonterminal">$field</span>) = <span class="macro-nonterminal">$field </span>{
                    tx.connection.execute(
                        <span class="macro">concat!</span>(
                            <span class="string">&quot;UPDATE subscription SET &quot;</span>,
                            <span class="macro">stringify!</span>(<span class="macro-nonterminal">$field</span>),
                            <span class="string">&quot; = ? WHERE list = ? AND pk = ?;&quot;
                        </span>),
                        <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span><span class="macro-nonterminal">$field</span>, <span class="kw-2">&amp;</span>list, <span class="kw-2">&amp;</span>pk],
                    )<span class="question-mark">?</span>;
                }
            }};
        }
        <span class="macro">update!</span>(name);
        <span class="macro">update!</span>(account);
        <span class="macro">update!</span>(digest);
        <span class="macro">update!</span>(enabled);
        <span class="macro">update!</span>(verified);
        <span class="macro">update!</span>(hide_address);
        <span class="macro">update!</span>(receive_duplicates);
        <span class="macro">update!</span>(receive_own_posts);
        <span class="macro">update!</span>(receive_confirmation);

        tx.commit()<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(())
    }

    <span class="doccomment">/// Fetch account by pk.
    </span><span class="kw">pub fn </span>account(<span class="kw-2">&amp;</span><span class="self">self</span>, pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;<span class="prelude-ty">Option</span>&lt;DbVal&lt;Account&gt;&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(<span class="string">&quot;SELECT * FROM account WHERE pk = ?;&quot;</span>)<span class="question-mark">?</span>;

        <span class="kw">let </span>ret = stmt
            .query_row(<span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>pk], |row| {
                <span class="kw">let </span>_pk: i64 = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                <span class="macro">debug_assert_eq!</span>(pk, _pk);
                <span class="prelude-val">Ok</span>(DbVal(
                    Account {
                        pk,
                        name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                        public_key: row.get(<span class="string">&quot;public_key&quot;</span>)<span class="question-mark">?</span>,
                        password: row.get(<span class="string">&quot;password&quot;</span>)<span class="question-mark">?</span>,
                        enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                    },
                    pk,
                ))
            })
            .optional()<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Fetch account by address.
    </span><span class="kw">pub fn </span>account_by_address(<span class="kw-2">&amp;</span><span class="self">self</span>, address: <span class="kw-2">&amp;</span>str) -&gt; <span class="prelude-ty">Result</span>&lt;<span class="prelude-ty">Option</span>&lt;DbVal&lt;Account&gt;&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(<span class="string">&quot;SELECT * FROM account WHERE address = ?;&quot;</span>)<span class="question-mark">?</span>;

        <span class="kw">let </span>ret = stmt
            .query_row(<span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>address], |row| {
                <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                <span class="prelude-val">Ok</span>(DbVal(
                    Account {
                        pk,
                        name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                        public_key: row.get(<span class="string">&quot;public_key&quot;</span>)<span class="question-mark">?</span>,
                        password: row.get(<span class="string">&quot;password&quot;</span>)<span class="question-mark">?</span>,
                        enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                    },
                    pk,
                ))
            })
            .optional()<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Fetch all subscriptions of an account by primary key.
    </span><span class="kw">pub fn </span>account_subscriptions(<span class="kw-2">&amp;</span><span class="self">self</span>, pk: i64) -&gt; <span class="prelude-ty">Result</span>&lt;Vec&lt;DbVal&lt;ListSubscription&gt;&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(<span class="string">&quot;SELECT * FROM subscription WHERE account = ?;&quot;</span>)<span class="question-mark">?</span>;
        <span class="kw">let </span>list_iter = stmt.query_map([<span class="kw-2">&amp;</span>pk], |row| {
            <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
            <span class="prelude-val">Ok</span>(DbVal(
                ListSubscription {
                    pk: row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>,
                    list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                    address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                    account: row.get(<span class="string">&quot;account&quot;</span>)<span class="question-mark">?</span>,
                    name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                    digest: row.get(<span class="string">&quot;digest&quot;</span>)<span class="question-mark">?</span>,
                    enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                    verified: row.get(<span class="string">&quot;verified&quot;</span>)<span class="question-mark">?</span>,
                    hide_address: row.get(<span class="string">&quot;hide_address&quot;</span>)<span class="question-mark">?</span>,
                    receive_duplicates: row.get(<span class="string">&quot;receive_duplicates&quot;</span>)<span class="question-mark">?</span>,
                    receive_own_posts: row.get(<span class="string">&quot;receive_own_posts&quot;</span>)<span class="question-mark">?</span>,
                    receive_confirmation: row.get(<span class="string">&quot;receive_confirmation&quot;</span>)<span class="question-mark">?</span>,
                },
                pk,
            ))
        })<span class="question-mark">?</span>;

        <span class="kw">let </span><span class="kw-2">mut </span>ret = <span class="macro">vec!</span>[];
        <span class="kw">for </span>list <span class="kw">in </span>list_iter {
            <span class="kw">let </span>list = list<span class="question-mark">?</span>;
            ret.push(list);
        }
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Fetch all accounts.
    </span><span class="kw">pub fn </span>accounts(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="prelude-ty">Result</span>&lt;Vec&lt;DbVal&lt;Account&gt;&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(<span class="string">&quot;SELECT * FROM account ORDER BY pk ASC;&quot;</span>)<span class="question-mark">?</span>;
        <span class="kw">let </span>list_iter = stmt.query_map([], |row| {
            <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
            <span class="prelude-val">Ok</span>(DbVal(
                Account {
                    pk,
                    name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                    address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                    public_key: row.get(<span class="string">&quot;public_key&quot;</span>)<span class="question-mark">?</span>,
                    password: row.get(<span class="string">&quot;password&quot;</span>)<span class="question-mark">?</span>,
                    enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                },
                pk,
            ))
        })<span class="question-mark">?</span>;

        <span class="kw">let </span><span class="kw-2">mut </span>ret = <span class="macro">vec!</span>[];
        <span class="kw">for </span>list <span class="kw">in </span>list_iter {
            <span class="kw">let </span>list = list<span class="question-mark">?</span>;
            ret.push(list);
        }
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Add account.
    </span><span class="kw">pub fn </span>add_account(<span class="kw-2">&amp;</span><span class="self">self</span>, new_val: Account) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;Account&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self
            </span>.connection
            .prepare(
                <span class="string">&quot;INSERT INTO account(name, address, public_key, password, enabled) VALUES(?, ?, \
                 ?, ?, ?) RETURNING *;&quot;</span>,
            )
            .unwrap();
        <span class="kw">let </span>ret = stmt.query_row(
            <span class="macro">rusqlite::params!</span>[
                <span class="kw-2">&amp;</span>new_val.name,
                <span class="kw-2">&amp;</span>new_val.address,
                <span class="kw-2">&amp;</span>new_val.public_key,
                <span class="kw-2">&amp;</span>new_val.password,
                <span class="kw-2">&amp;</span>new_val.enabled,
            ],
            |row| {
                <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                <span class="prelude-val">Ok</span>(DbVal(
                    Account {
                        pk,
                        name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                        address: row.get(<span class="string">&quot;address&quot;</span>)<span class="question-mark">?</span>,
                        public_key: row.get(<span class="string">&quot;public_key&quot;</span>)<span class="question-mark">?</span>,
                        password: row.get(<span class="string">&quot;password&quot;</span>)<span class="question-mark">?</span>,
                        enabled: row.get(<span class="string">&quot;enabled&quot;</span>)<span class="question-mark">?</span>,
                    },
                    pk,
                ))
            },
        )<span class="question-mark">?</span>;

        <span class="macro">trace!</span>(<span class="string">&quot;add_account {:?}.&quot;</span>, <span class="kw-2">&amp;</span>ret);
        <span class="prelude-val">Ok</span>(ret)
    }

    <span class="doccomment">/// Remove an account by their address.
    </span><span class="kw">pub fn </span>remove_account(<span class="kw-2">&amp;</span><span class="self">self</span>, address: <span class="kw-2">&amp;</span>str) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
        <span class="self">self</span>.connection
            .query_row(
                <span class="string">&quot;DELETE FROM account WHERE address = ? RETURNING *;&quot;</span>,
                <span class="macro">rusqlite::params!</span>[<span class="kw-2">&amp;</span>address],
                |<span class="kw">_</span>| <span class="prelude-val">Ok</span>(()),
            )
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(err, rusqlite::Error::QueryReturnedNoRows) {
                    Error::from(err).<span class="highlight">chain_err</span>(|| NotFound(<span class="string">&quot;account not found!&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;

        <span class="prelude-val">Ok</span>(())
    }</code></pre></div></div></div><div class="scraped-example " data-locs="[[[40,40],&quot;../../src/mailpot/templates.rs.html#334&quot;,&quot;line 334&quot;]]"><div class="scraped-example-title">core/src/templates.rs (<a href="../../src/mailpot/templates.rs.html#334">line 334</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>294</span>
<span>295</span>
<span>296</span>
<span>297</span>
<span>298</span>
<span>299</span>
<span>300</span>
<span>301</span>
<span>302</span>
<span>303</span>
<span>304</span>
<span>305</span>
<span>306</span>
<span>307</span>
<span>308</span>
<span>309</span>
<span>310</span>
<span>311</span>
<span>312</span>
<span>313</span>
<span>314</span>
<span>315</span>
<span>316</span>
<span>317</span>
<span>318</span>
<span>319</span>
<span>320</span>
<span>321</span>
<span>322</span>
<span>323</span>
<span>324</span>
<span>325</span>
<span>326</span>
<span>327</span>
<span>328</span>
<span>329</span>
<span>330</span>
<span>331</span>
<span>332</span>
<span>333</span>
<span>334</span>
<span>335</span>
<span>336</span>
<span>337</span>
<span>338</span>
<span>339</span>
<span>340</span>
<span>341</span>
<span>342</span>
</pre></div><pre class="rust"><code><button class="expand">&varr;</button>    <span class="kw">pub fn </span>add_template(<span class="kw-2">&amp;</span><span class="self">self</span>, template: Template) -&gt; <span class="prelude-ty">Result</span>&lt;DbVal&lt;Template&gt;&gt; {
        <span class="kw">let </span><span class="kw-2">mut </span>stmt = <span class="self">self</span>.connection.prepare(
            <span class="string">&quot;INSERT INTO template(name, list, subject, headers_json, body) VALUES(?, ?, ?, ?, ?) \
             RETURNING *;&quot;</span>,
        )<span class="question-mark">?</span>;
        <span class="kw">let </span>ret = stmt
            .query_row(
                <span class="macro">rusqlite::params!</span>[
                    <span class="kw-2">&amp;</span>template.name,
                    <span class="kw-2">&amp;</span>template.list,
                    <span class="kw-2">&amp;</span>template.subject,
                    <span class="kw-2">&amp;</span>template.headers_json,
                    <span class="kw-2">&amp;</span>template.body
                ],
                |row| {
                    <span class="kw">let </span>pk = row.get(<span class="string">&quot;pk&quot;</span>)<span class="question-mark">?</span>;
                    <span class="prelude-val">Ok</span>(DbVal(
                        Template {
                            pk,
                            name: row.get(<span class="string">&quot;name&quot;</span>)<span class="question-mark">?</span>,
                            list: row.get(<span class="string">&quot;list&quot;</span>)<span class="question-mark">?</span>,
                            subject: row.get(<span class="string">&quot;subject&quot;</span>)<span class="question-mark">?</span>,
                            headers_json: row.get(<span class="string">&quot;headers_json&quot;</span>)<span class="question-mark">?</span>,
                            body: row.get(<span class="string">&quot;body&quot;</span>)<span class="question-mark">?</span>,
                        },
                        pk,
                    ))
                },
            )
            .map_err(|err| {
                <span class="kw">if </span><span class="macro">matches!</span>(
                    err,
                    rusqlite::Error::SqliteFailure(
                        rusqlite::ffi::Error {
                            code: rusqlite::ffi::ErrorCode::ConstraintViolation,
                            extended_code: <span class="number">787
                        </span>},
                        <span class="kw">_
                    </span>)
                ) {
                    Error::from(err).<span class="highlight focus">chain_err</span>(|| NotFound(<span class="string">&quot;Could not find a list with this pk.&quot;</span>))
                } <span class="kw">else </span>{
                    err.into()
                }
            })<span class="question-mark">?</span>;

        <span class="macro">trace!</span>(<span class="string">&quot;add_template {:?}.&quot;</span>, <span class="kw-2">&amp;</span>ret);
        <span class="prelude-val">Ok</span>(ret)
    }</code></pre></div></div></div></div></details></div></details><details class="toggle method-toggle" open><summary><section id="method.description" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><h4 class="code-header">pub fn <a href="#method.description" class="fn">description</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>A short description of the error.
This method is identical to <a href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html#tymethod.description"><code>Error::description()</code></a></p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Error-1" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#70-76">source</a><a href="#impl-Error-1" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new_external" class="method"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#72-75">source</a><h4 class="code-header">pub fn <a href="#method.new_external" class="fn">new_external</a>&lt;S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(msg: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Helper function to create a new generic error message.</p>
</div><div class="docblock scraped-example-list"><span></span><h5 id="scraped-examples-1"><a href="#scraped-examples-1">Examples found in repository</a><a class="scrape-help" href="../../scrape-examples-help.html">?</a></h5><div class="scraped-example expanded" data-locs="[[[8,8],&quot;../../src/mailpot/queue.rs.html#65&quot;,&quot;line 65&quot;]]"><div class="scraped-example-title">core/src/queue.rs (<a href="../../src/mailpot/queue.rs.html#65">line 65</a>)</div><div class="code-wrapper"><div class="example-wrap"><div data-nosnippet><pre class="src-line-numbers"><span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
</pre></div><pre class="rust"><code>    <span class="kw">fn </span>from_str(s: <span class="kw-2">&amp;</span>str) -&gt; <span class="prelude-ty">Result</span>&lt;<span class="self">Self</span>&gt; {
        <span class="prelude-val">Ok</span>(<span class="kw">match </span>s.trim() {
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Maildrop)) =&gt; <span class="self">Self</span>::Maildrop,
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Hold)) =&gt; <span class="self">Self</span>::Hold,
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Deferred)) =&gt; <span class="self">Self</span>::Deferred,
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Corrupt)) =&gt; <span class="self">Self</span>::Corrupt,
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Out)) =&gt; <span class="self">Self</span>::Out,
            s <span class="kw">if </span>s.eq_ignore_ascii_case(<span class="macro">stringify!</span>(Error)) =&gt; <span class="self">Self</span>::Error,
            other =&gt; <span class="kw">return </span><span class="prelude-val">Err</span>(<span class="highlight focus">Error::new_external</span>(<span class="macro">format!</span>(<span class="string">&quot;Invalid Queue name: {other}.&quot;</span>))),
        })
    }</code></pre></div></div></div></div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-ChainedError-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-ChainedError-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../trait.ChainedError.html" title="trait mailpot::ChainedError">ChainedError</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.ErrorKind" class="associatedtype trait-impl"><a href="#associatedtype.ErrorKind" class="anchor">§</a><h4 class="code-header">type <a href="../trait.ChainedError.html#associatedtype.ErrorKind" class="associatedtype">ErrorKind</a> = <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a></h4></section></summary><div class='docblock'>Associated kind type.</div></details><details class="toggle method-toggle" open><summary><section id="method.from_kind-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from_kind-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.from_kind" class="fn">from_kind</a>(kind: Self::<a class="associatedtype" href="../trait.ChainedError.html#associatedtype.ErrorKind" title="type mailpot::ChainedError::ErrorKind">ErrorKind</a>) -&gt; Self</h4></section></summary><div class='docblock'>Constructs an error from a kind, and generates a backtrace.</div></details><details class="toggle method-toggle" open><summary><section id="method.with_chain-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.with_chain-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.with_chain" class="fn">with_chain</a>&lt;E, K&gt;(error: E, kind: K) -&gt; Self<span class="where fmt-newline">where
    E: <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    K: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;Self::<a class="associatedtype" href="../trait.ChainedError.html#associatedtype.ErrorKind" title="type mailpot::ChainedError::ErrorKind">ErrorKind</a>&gt;,</span></h4></section></summary><div class='docblock'>Constructs a chained error from another error and a kind, and generates a backtrace.</div></details><details class="toggle method-toggle" open><summary><section id="method.kind-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.kind-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.kind" class="fn">kind</a>(&amp;self) -&gt; &amp;Self::<a class="associatedtype" href="../trait.ChainedError.html#associatedtype.ErrorKind" title="type mailpot::ChainedError::ErrorKind">ErrorKind</a></h4></section></summary><div class='docblock'>Returns the kind of the error.</div></details><details class="toggle method-toggle" open><summary><section id="method.iter-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.iter-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.iter" class="fn">iter</a>(&amp;self) -&gt; <a class="struct" href="https://docs.rs/error-chain/0.12.4/error_chain/struct.Iter.html" title="struct error_chain::Iter">Iter</a>&lt;'_&gt;</h4></section></summary><div class='docblock'>Iterates over the error chain.</div></details><details class="toggle method-toggle" open><summary><section id="method.chain_err-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.chain_err-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.chain_err" class="fn">chain_err</a>&lt;F, EK&gt;(self, error: F) -&gt; Self<span class="where fmt-newline">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; EK,
    EK: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>&gt;,</span></h4></section></summary><div class='docblock'>Extends the error chain with a new entry.</div></details><details class="toggle method-toggle" open><summary><section id="method.backtrace-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.backtrace-1" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#tymethod.backtrace" class="fn">backtrace</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="https://docs.rs/error-chain/0.12.4/error_chain/backtrace/imp/type.Backtrace.html" title="type error_chain::backtrace::imp::Backtrace">Backtrace</a>&gt;</h4></section></summary><div class='docblock'>Returns the backtrace associated with this error.</div></details><details class="toggle method-toggle" open><summary><section id="method.display_chain" class="method trait-impl"><a class="srclink rightside" href="https://docs.rs/error-chain/0.12.4/src/error_chain/lib.rs.html#624">source</a><a href="#method.display_chain" class="anchor">§</a><h4 class="code-header">fn <a href="../trait.ChainedError.html#method.display_chain" class="fn">display_chain</a>&lt;'a&gt;(&amp;'a self) -&gt; <a class="struct" href="https://docs.rs/error-chain/0.12.4/error_chain/struct.DisplayChain.html" title="struct error_chain::DisplayChain">DisplayChain</a>&lt;'a, Self&gt;</h4></section></summary><div class='docblock'>Returns an object which implements <code>Display</code> for printing the full
context of this error. <a href="../trait.ChainedError.html#method.display_chain">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-Debug-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.fmt-1" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Display-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-Display-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Error-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-Error-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.description-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.description-1" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.description" class="fn">description</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></h4></section></summary><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 1.42.0: use the Display impl or to_string()</span></div></span><div class='docblock'> <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.description">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.source" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.source" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.source" class="fn">source</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;(dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + 'static)&gt;</h4></section></summary><div class='docblock'>The lower-level source of this error, if any. <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.source">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.cause" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/error.rs.html#120">source</a></span><a href="#method.cause" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.cause" class="fn">cause</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a>&gt;</h4></section></summary><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 1.33.0: replaced by Error::source, which can support downcasting</span></div></span></details><details class="toggle method-toggle" open><summary><section id="method.provide" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/error.rs.html#194">source</a><a href="#method.provide" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.provide" class="fn">provide</a>&lt;'a&gt;(&amp;'a self, demand: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.Demand.html" title="struct core::any::Demand">Demand</a>&lt;'a&gt;)</h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>error_generic_member_access</code>)</span></div></span><div class='docblock'>Provides type based access to context intended for error reports. <a href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html#method.provide">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3C%26'a+str%3E-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3C%26'a+str%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;'a&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;&amp;'a <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-8" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-8" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(s: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;Error&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error returned from e-mail protocol operations from <code>melib</code> crate.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-1" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-1" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: Error) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error-1" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error-1" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error returned from internal I/O operations.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-2" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-2" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error-2" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error-2" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="https://docs.rs/rusqlite/0.28.0/rusqlite/error/enum.Error.html" title="enum rusqlite::error::Error">Error</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error returned from sqlite3.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-3" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-3" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="enum" href="https://docs.rs/rusqlite/0.28.0/rusqlite/error/enum.Error.html" title="enum rusqlite::error::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error-3" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error-3" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="https://docs.rs/serde_json/1.0.96/serde_json/error/struct.Error.html" title="struct serde_json::error::Error">Error</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error from deserializing JSON values.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-4" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-4" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="struct" href="https://docs.rs/serde_json/1.0.96/serde_json/error/struct.Error.html" title="struct serde_json::error::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error-4" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error-4" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="https://docs.rs/anyhow/1.0.71/anyhow/struct.Error.html" title="struct anyhow::Error">Error</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error returned from an external user initiated operation such as deserialization or I/O.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-5" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-5" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="struct" href="https://docs.rs/anyhow/1.0.71/anyhow/struct.Error.html" title="struct anyhow::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-Error-5" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-Error-5" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="https://docs.rs/minijinja/0.31.1/minijinja/error/struct.Error.html" title="struct minijinja::error::Error">Error</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="docblock"><p>Error returned from minijinja template engine.</p>
</div><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-6" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-6" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="struct" href="https://docs.rs/minijinja/0.31.1/minijinja/error/struct.Error.html" title="struct minijinja::error::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CError%3E-for-ErrorKind" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CError%3E-for-ErrorKind" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a>&gt; for <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CErrorKind%3E-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CErrorKind%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-9" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-9" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(e: <a class="enum" href="enum.ErrorKind.html" title="enum mailpot::errors::ErrorKind">ErrorKind</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-From%3CString%3E-for-Error" class="impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#impl-From%3CString%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt; for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-7" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/errors.rs.html#28-68">source</a><a href="#method.from-7" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(s: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Error" class="impl"><a href="#impl-RefUnwindSafe-for-Error" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section><section id="impl-Send-for-Error" class="impl"><a href="#impl-Send-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section><section id="impl-Sync-for-Error" class="impl"><a href="#impl-Sync-for-Error" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section><section id="impl-Unpin-for-Error" class="impl"><a href="#impl-Unpin-for-Error" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section><section id="impl-UnwindSafe-for-Error" class="impl"><a href="#impl-UnwindSafe-for-Error" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Error.html" title="struct mailpot::errors::Error">Error</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#201">source</a><a href="#impl-Any-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#202">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#722">source</a><a href="#impl-From%3CT%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from-10" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#725">source</a><a href="#method.from-10" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#706">source</a><a href="#impl-Into%3CU%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#715">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Provider-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/error.rs.html#198">source</a><a href="#impl-Provider-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;E&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Provider.html" title="trait core::any::Provider">Provider</a> for E<span class="where fmt-newline">where
    E: <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.provide-1" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/error.rs.html#202">source</a><a href="#method.provide-1" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Provider.html#tymethod.provide" class="fn">provide</a>&lt;'a&gt;(&amp;'a self, demand: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.Demand.html" title="struct core::any::Demand">Demand</a>&lt;'a&gt;)</h4></section></summary><span class="item-info"><div class="stab unstable"><span class="emoji">🔬</span><span>This is a nightly-only experimental API. (<code>provide_any</code>)</span></div></span><div class='docblock'>Data providers should implement this method to provide <em>all</em> values they are able to
provide by using <code>demand</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Provider.html#tymethod.provide">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ToString-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/alloc/string.rs.html#2514">source</a><a href="#impl-ToString-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html" title="trait alloc::string::ToString">ToString</a> for T<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.to_string" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/alloc/string.rs.html#2520">source</a><a href="#method.to_string" class="anchor">§</a><h4 class="code-header">default fn <a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html#tymethod.to_string" class="fn">to_string</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a></h4></section></summary><div class='docblock'>Converts the given value to a <code>String</code>. <a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html#tymethod.to_string">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#762">source</a><a href="#impl-TryFrom%3CU%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#769">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Error" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#747">source</a><a href="#impl-TryInto%3CU%3E-for-Error" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#754">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>
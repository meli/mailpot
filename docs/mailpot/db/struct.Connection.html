<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A connection to a `mailpot` database."><title>Connection in mailpot::db - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mailpot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (f5559e338 2023-04-24)" data-search-js="search-618e954b235f6acc.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-6f6ffb5395b17c6e.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><style>
.rustdoc { flex-wrap: wrap; }
@media (prefers-color-scheme: light) {
    :root {
        --border-primary: #cdcdcd;
        --border-secondary: #cdcdcd;
        --a-normal-text: #034575;
        --a-normal-underline: #bbb;
        --a-visited-underline: #707070;
        --a-hover-bg: #bfbfbf40;
        --a-active-text: #c00;
        --a-active-underline: #c00;
        --accent-primary: #0085f2;
        --accent-primary-engage: #0085f21a;
        --accent-secondary: #0085f2;
        --accent-tertiary: #0085f21a;
        color-scheme: light;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --border-primary: #858585;
        --border-secondary: #696969;
        --a-normal-text: #4db4ff;
        --a-normal-underline: #8b8b8b;
        --a-visited-underline: #707070;
        --a-hover-bg: #bfbfbf40;
        --a-active-text: #c00;
        --a-active-underline: #c00;
        --accent-primary: #5e9eff;
        --accent-primary-engage: #5e9eff1a;
        --accent-secondary: #5e9eff;
        --accent-tertiary: #0085f21a;
        color-scheme: dark;
    }
}

nav.main-nav {
  padding: 0rem 1rem;
  border: 0.1rem solid var(--border-secondary);
  border-left: none;
  border-right: none;
  border-radius: 2px;
  padding: 10px 14px 10px 10px;
  margin-bottom: 10px;
  /*! width: 100%; */
  height: max-content;
  width: 100vw;
}

nav.main-nav * {
  padding: 0;
  margin: 0;
}

nav.main-nav > ul {
  display: flex;
  flex-wrap: wrap;
  row-gap: 1rem;
  list-style: none;
}

nav.main-nav > ul > li > a {
  padding: 1rem;
}
nav.main-nav a[href] {
  text-decoration: underline;
    text-decoration-color: currentcolor;
  color: #034575;
  color: var(--a-normal-text);
  text-decoration-color: #707070;
  text-decoration-color: var(--accent-secondary);
  text-decoration-skip-ink: none;
  font-synthesis: none;
font-feature-settings: "onum" 1;
text-rendering: optimizeLegibility;
font-family: -apple-system,BlinkMacSystemFont,Roboto,Roboto Slab,Droid Serif,Segoe UI,system-ui,Arial,sans-serif;
font-size: 1.125em;
}
nav.main-nav > ul > li > a:hover {
  outline: 0.1rem solid;
  outline-offset: -0.5rem;
}
a[href]:focus, a[href]:hover {
  text-decoration-thickness: 2px;
  text-decoration-skip-ink: none;
}
</style>
<nav class="main-nav">
  <ul>
    <li><a href="https://git.meli.delivery/meli/mailpot">Gitea Repository</a></li>
    <li><a href="https://github.com/meli/mailpot">Github Repository</a></li>
    <li><a href="https://lists.meli.delivery/">Official Instance</a></li>
    <li><a href="https://meli.github.io/mailpot/lists/2/">Static Demo</a></li>
  </ul>
</nav>

<nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../mailpot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../mailpot/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Connection</a></h2><div class="sidebar-elems"><section><h3><a href="#fields">Fields</a></h3><ul class="block"><li><a href="#structfield.conf">conf</a></li><li><a href="#structfield.connection">connection</a></li></ul><h3><a href="#implementations">Associated Constants</a></h3><ul class="block"><li><a href="#associatedconstant.SCHEMA">SCHEMA</a></li></ul><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.accept_candidate_subscription">accept_candidate_subscription</a></li><li><a href="#method.account">account</a></li><li><a href="#method.account_by_address">account_by_address</a></li><li><a href="#method.account_subscriptions">account_subscriptions</a></li><li><a href="#method.accounts">accounts</a></li><li><a href="#method.add_account">add_account</a></li><li><a href="#method.add_candidate_subscription">add_candidate_subscription</a></li><li><a href="#method.add_list_owner">add_list_owner</a></li><li><a href="#method.add_subscription">add_subscription</a></li><li><a href="#method.add_template">add_template</a></li><li><a href="#method.candidate_subscription">candidate_subscription</a></li><li><a href="#method.conf">conf</a></li><li><a href="#method.create_list">create_list</a></li><li><a href="#method.delete_from_queue">delete_from_queue</a></li><li><a href="#method.fetch_template">fetch_template</a></li><li><a href="#method.fetch_templates">fetch_templates</a></li><li><a href="#method.inner_post">inner_post</a></li><li><a href="#method.insert_post">insert_post</a></li><li><a href="#method.insert_to_queue">insert_to_queue</a></li><li><a href="#method.list">list</a></li><li><a href="#method.list_by_id">list_by_id</a></li><li><a href="#method.list_filters">list_filters</a></li><li><a href="#method.list_owners">list_owners</a></li><li><a href="#method.list_post_by_message_id">list_post_by_message_id</a></li><li><a href="#method.list_post_policy">list_post_policy</a></li><li><a href="#method.list_posts">list_posts</a></li><li><a href="#method.list_subscription">list_subscription</a></li><li><a href="#method.list_subscription_by_address">list_subscription_by_address</a></li><li><a href="#method.list_subscription_policy">list_subscription_policy</a></li><li><a href="#method.list_subscriptions">list_subscriptions</a></li><li><a href="#method.lists">lists</a></li><li><a href="#method.load_archives">load_archives</a></li><li><a href="#method.months">months</a></li><li><a href="#method.new_smtp_connection">new_smtp_connection</a></li><li><a href="#method.open_db">open_db</a></li><li><a href="#method.open_or_create_db">open_or_create_db</a></li><li><a href="#method.post">post</a></li><li><a href="#method.queue">queue</a></li><li><a href="#method.remove_account">remove_account</a></li><li><a href="#method.remove_list_owner">remove_list_owner</a></li><li><a href="#method.remove_list_post_policy">remove_list_post_policy</a></li><li><a href="#method.remove_list_post_policy_panic">remove_list_post_policy_panic</a></li><li><a href="#method.remove_list_subscription_policy">remove_list_subscription_policy</a></li><li><a href="#method.remove_list_subscription_policy_panic">remove_list_subscription_policy_panic</a></li><li><a href="#method.remove_subscription">remove_subscription</a></li><li><a href="#method.remove_template">remove_template</a></li><li><a href="#method.request">request</a></li><li><a href="#method.send_reply_with_list_template">send_reply_with_list_template</a></li><li><a href="#method.set_list_post_policy">set_list_post_policy</a></li><li><a href="#method.set_list_subscription_policy">set_list_subscription_policy</a></li><li><a href="#method.submit">submit</a></li><li><a href="#method.trusted">trusted</a></li><li><a href="#method.untrusted">untrusted</a></li><li><a href="#method.update_account">update_account</a></li><li><a href="#method.update_list">update_list</a></li><li><a href="#method.update_subscription">update_subscription</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Debug-for-Connection">Debug</a></li><li><a href="#impl-Drop-for-Connection">Drop</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-Connection">!RefUnwindSafe</a></li><li><a href="#impl-Sync-for-Connection">!Sync</a></li><li><a href="#impl-UnwindSafe-for-Connection">!UnwindSafe</a></li><li><a href="#impl-Send-for-Connection">Send</a></li><li><a href="#impl-Unpin-for-Connection">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-Connection">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Connection">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Connection">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Connection">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Connection">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Connection">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Connection">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In mailpot::db</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">mailpot</a>::<wbr><a href="index.html">db</a>::<wbr><a class="struct" href="#">Connection</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/mailpot/db.rs.html#35-39">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct Connection {
    pub connection: DbConnection,
    conf: <a class="struct" href="../config/struct.Configuration.html" title="struct mailpot::config::Configuration">Configuration</a>,
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A connection to a <code>mailpot</code> database.</p>
</div></details><h2 id="fields" class="fields small-section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.connection" class="structfield small-section-header"><a href="#structfield.connection" class="anchor field">§</a><code>connection: DbConnection</code></span><div class="docblock"><p>The <code>rusqlite</code> connection handle.</p>
</div><span id="structfield.conf" class="structfield small-section-header"><a href="#structfield.conf" class="anchor field">§</a><code>conf: <a class="struct" href="../config/struct.Configuration.html" title="struct mailpot::config::Configuration">Configuration</a></code></span><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Connection" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/templates.rs.html#24-176">source</a><a href="#impl-Connection" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fetch_templates" class="method"><a class="srclink rightside" href="../../src/mailpot/db/templates.rs.html#26-49">source</a><h4 class="code-header">pub fn <a href="#method.fetch_templates" class="fn">fetch_templates</a>(&amp;self) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.fetch_template" class="method"><a class="srclink rightside" href="../../src/mailpot/db/templates.rs.html#52-99">source</a><h4 class="code-header">pub fn <a href="#method.fetch_template" class="fn">fetch_template</a>(
    &amp;self,
    template: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>,
    list_pk: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>&gt;
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch a named template.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_template" class="method"><a class="srclink rightside" href="../../src/mailpot/db/templates.rs.html#102-150">source</a><h4 class="code-header">pub fn <a href="#method.add_template" class="fn">add_template</a>(&amp;self, template: <a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Insert a named template.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_template" class="method"><a class="srclink rightside" href="../../src/mailpot/db/templates.rs.html#153-175">source</a><h4 class="code-header">pub fn <a href="#method.remove_template" class="fn">remove_template</a>(
    &amp;self,
    template: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>,
    list_pk: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>&gt;
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>&gt;</h4></section></summary><div class="docblock"><p>Remove a named template.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-1" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/queue.rs.html#150-260">source</a><a href="#impl-Connection-1" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.insert_to_queue" class="method"><a class="srclink rightside" href="../../src/mailpot/db/queue.rs.html#152-179">source</a><h4 class="code-header">pub fn <a href="#method.insert_to_queue" class="fn">insert_to_queue</a>(&amp;self, entry: <a class="struct" href="queue/struct.QueueEntry.html" title="struct mailpot::db::queue::QueueEntry">QueueEntry</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="queue/struct.QueueEntry.html" title="struct mailpot::db::queue::QueueEntry">QueueEntry</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Insert a received email into a queue.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.queue" class="method"><a class="srclink rightside" href="../../src/mailpot/db/queue.rs.html#182-212">source</a><h4 class="code-header">pub fn <a href="#method.queue" class="fn">queue</a>(&amp;self, queue: <a class="enum" href="queue/enum.Queue.html" title="enum mailpot::db::queue::Queue">Queue</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="queue/struct.QueueEntry.html" title="struct mailpot::db::queue::QueueEntry">QueueEntry</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all queue entries.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.delete_from_queue" class="method"><a class="srclink rightside" href="../../src/mailpot/db/queue.rs.html#215-259">source</a><h4 class="code-header">pub fn <a href="#method.delete_from_queue" class="fn">delete_from_queue</a>(
    &amp;mut self,
    queue: <a class="enum" href="queue/enum.Queue.html" title="enum mailpot::db::queue::Queue">Queue</a>,
    index: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>&gt;
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="queue/struct.QueueEntry.html" title="struct mailpot::db::queue::QueueEntry">QueueEntry</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Delete queue entries returning the deleted values.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-2" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#25-751">source</a><a href="#impl-Connection-2" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.insert_post" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#27-72">source</a><h4 class="code-header">pub fn <a href="#method.insert_post" class="fn">insert_post</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    message: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    env: &amp;Envelope
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>&gt;</h4></section></summary><div class="docblock"><p>Insert a mailing list post into the database.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.post" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#75-104">source</a><h4 class="code-header">pub fn <a href="#method.post" class="fn">post</a>(&amp;mut self, env: &amp;Envelope, raw: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>], _dry_run: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Process a new mailing list post.</p>
</div></details><section id="method.inner_post" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#106-282">source</a><h4 class="code-header">fn <a href="#method.inner_post" class="fn">inner_post</a>(
    &amp;mut self,
    env: &amp;Envelope,
    raw: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>],
    _dry_run: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><details class="toggle method-toggle" open><summary><section id="method.request" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#285-645">source</a><h4 class="code-header">pub fn <a href="#method.request" class="fn">request</a>(
    &amp;mut self,
    list: &amp;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;,
    request: <a class="enum" href="../mail/enum.ListRequest.html" title="enum mailpot::mail::ListRequest">ListRequest</a>,
    env: &amp;Envelope,
    raw: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Process a new mailing list request.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.months" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#649-665">source</a><h4 class="code-header">pub fn <a href="#method.months" class="fn">months</a>(&amp;self, list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all year and month values for which at least one post exists in
<code>yyyy-mm</code> format.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_post_by_message_id" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#668-698">source</a><h4 class="code-header">pub fn <a href="#method.list_post_by_message_id" class="fn">list_post_by_message_id</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    message_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Post.html" title="struct mailpot::models::Post">Post</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Find a post by its <code>Message-ID</code> email header.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.send_reply_with_list_template" class="method"><a class="srclink rightside" href="../../src/mailpot/db/posts.rs.html#701-750">source</a><h4 class="code-header">pub fn <a href="#method.send_reply_with_list_template" class="fn">send_reply_with_list_template</a>&lt;'ctx, F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>() -&gt; <a class="struct" href="../templates/struct.Template.html" title="struct mailpot::templates::Template">Template</a>&gt;(
    &amp;self,
    render_context: <a class="struct" href="posts/struct.TemplateRenderContext.html" title="struct mailpot::db::posts::TemplateRenderContext">TemplateRenderContext</a>&lt;'ctx, F&gt;,
    recipients: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="enum" href="https://doc.rust-lang.org/nightly/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'ctx, Address&gt;&gt;
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Helper function to send a template reply.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-3" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#22-587">source</a><a href="#impl-Connection-3" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.list_subscriptions" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#24-55">source</a><h4 class="code-header">pub fn <a href="#method.list_subscriptions" class="fn">list_subscriptions</a>(
    &amp;self,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all subscriptions of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#58-85">source</a><h4 class="code-header">pub fn <a href="#method.list_subscription" class="fn">list_subscription</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch mailing list subscription.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_subscription_by_address" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#88-120">source</a><h4 class="code-header">pub fn <a href="#method.list_subscription_by_address" class="fn">list_subscription_by_address</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    address: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch mailing list subscription by their address.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#123-175">source</a><h4 class="code-header">pub fn <a href="#method.add_subscription" class="fn">add_subscription</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    new_val: <a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Add subscription to mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_candidate_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#178-209">source</a><h4 class="code-header">pub fn <a href="#method.add_candidate_subscription" class="fn">add_candidate_subscription</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    new_val: <a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListCandidateSubscription.html" title="struct mailpot::models::ListCandidateSubscription">ListCandidateSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Create subscription candidate.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.candidate_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#212-241">source</a><h4 class="code-header">pub fn <a href="#method.candidate_subscription" class="fn">candidate_subscription</a>(
    &amp;self,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListCandidateSubscription.html" title="struct mailpot::models::ListCandidateSubscription">ListCandidateSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch subscription candidate by primary key.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.accept_candidate_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#244-280">source</a><h4 class="code-header">pub fn <a href="#method.accept_candidate_subscription" class="fn">accept_candidate_subscription</a>(
    &amp;mut self,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Accept subscription candidate.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#283-299">source</a><h4 class="code-header">pub fn <a href="#method.remove_subscription" class="fn">remove_subscription</a>(&amp;self, list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, address: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Remove a subscription by their address.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.update_subscription" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#302-366">source</a><h4 class="code-header">pub fn <a href="#method.update_subscription" class="fn">update_subscription</a>(
    &amp;mut self,
    change_set: <a class="struct" href="../models/changesets/struct.ListSubscriptionChangeset.html" title="struct mailpot::models::changesets::ListSubscriptionChangeset">ListSubscriptionChangeset</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Update a mailing list subscription.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.account" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#369-392">source</a><h4 class="code-header">pub fn <a href="#method.account" class="fn">account</a>(&amp;self, pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Account.html" title="struct mailpot::models::Account">Account</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch account by pk.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.account_by_address" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#395-417">source</a><h4 class="code-header">pub fn <a href="#method.account_by_address" class="fn">account_by_address</a>(
    &amp;self,
    address: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Account.html" title="struct mailpot::models::Account">Account</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch account by address.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.account_subscriptions" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#420-451">source</a><h4 class="code-header">pub fn <a href="#method.account_subscriptions" class="fn">account_subscriptions</a>(
    &amp;self,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListSubscription.html" title="struct mailpot::models::ListSubscription">ListSubscription</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all subscriptions of an account by primary key.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.accounts" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#454-479">source</a><h4 class="code-header">pub fn <a href="#method.accounts" class="fn">accounts</a>(&amp;self) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Account.html" title="struct mailpot::models::Account">Account</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all accounts.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_account" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#482-516">source</a><h4 class="code-header">pub fn <a href="#method.add_account" class="fn">add_account</a>(&amp;self, new_val: <a class="struct" href="../models/struct.Account.html" title="struct mailpot::models::Account">Account</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Account.html" title="struct mailpot::models::Account">Account</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Add account.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_account" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#519-535">source</a><h4 class="code-header">pub fn <a href="#method.remove_account" class="fn">remove_account</a>(&amp;self, address: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Remove an account by their address.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.update_account" class="method"><a class="srclink rightside" href="../../src/mailpot/db/subscriptions.rs.html#538-586">source</a><h4 class="code-header">pub fn <a href="#method.update_account" class="fn">update_account</a>(&amp;mut self, change_set: <a class="struct" href="../models/changesets/struct.AccountChangeset.html" title="struct mailpot::models::changesets::AccountChangeset">AccountChangeset</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Update an account.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-4" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#27-206">source</a><a href="#impl-Connection-4" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.list_post_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#29-52">source</a><h4 class="code-header">pub fn <a href="#method.list_post_policy" class="fn">list_post_policy</a>(&amp;self, pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.PostPolicy.html" title="struct mailpot::models::PostPolicy">PostPolicy</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch the post policy of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_list_post_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#101-116">source</a><h4 class="code-header">pub fn <a href="#method.remove_list_post_policy" class="fn">remove_list_post_policy</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    policy_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Remove an existing list policy.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>

<span class="kw">let </span>db = Connection::open_or_create_db(config).unwrap().trusted();
<span class="kw">let </span>list = db
    .create_list(MailingList {
        pk: <span class="number">0</span>,
        name: <span class="string">&quot;foobar chat&quot;</span>.into(),
        id: <span class="string">&quot;foo-chat&quot;</span>.into(),
        address: <span class="string">&quot;foo-chat@example.com&quot;</span>.into(),
        description: <span class="prelude-val">None</span>,
        archive_url: <span class="prelude-val">None</span>,
    })
    .unwrap();

<span class="kw">let </span>pol = db
    .set_list_post_policy(PostPolicy {
        pk: -<span class="number">1</span>,
        list: list.pk(),
        announce_only: <span class="bool-val">false</span>,
        subscription_only: <span class="bool-val">true</span>,
        approval_needed: <span class="bool-val">false</span>,
        open: <span class="bool-val">false</span>,
        custom: <span class="bool-val">false</span>,
    })
    .unwrap();
db.remove_list_post_policy(list.pk(), pol.pk()).unwrap();</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_list_post_policy_panic" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#138">source</a><h4 class="code-header">pub fn <a href="#method.remove_list_post_policy_panic" class="fn">remove_list_post_policy_panic</a>()</h4></section></summary><div class="docblock">
<div class="example-wrap should_panic"><a href="#" class="tooltip" title="This example panics">ⓘ</a><pre class="rust rust-example-rendered"><code>

<span class="kw">let </span>db = Connection::open_or_create_db(config).unwrap().trusted();
db.remove_list_post_policy(<span class="number">1</span>, <span class="number">1</span>).unwrap();</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_list_post_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#141-205">source</a><h4 class="code-header">pub fn <a href="#method.set_list_post_policy" class="fn">set_list_post_policy</a>(
    &amp;self,
    policy: <a class="struct" href="../models/struct.PostPolicy.html" title="struct mailpot::models::PostPolicy">PostPolicy</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.PostPolicy.html" title="struct mailpot::models::PostPolicy">PostPolicy</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Set the unique post policy for a list.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-5" class="impl"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#212-391">source</a><a href="#impl-Connection-5" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.list_subscription_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#214-240">source</a><h4 class="code-header">pub fn <a href="#method.list_subscription_policy" class="fn">list_subscription_policy</a>(
    &amp;self,
    pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.SubscriptionPolicy.html" title="struct mailpot::models::SubscriptionPolicy">SubscriptionPolicy</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch the subscription policy of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_list_subscription_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#288-303">source</a><h4 class="code-header">pub fn <a href="#method.remove_list_subscription_policy" class="fn">remove_list_subscription_policy</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    policy_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Remove an existing subscription policy.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>

<span class="kw">let </span>db = Connection::open_or_create_db(config).unwrap().trusted();
<span class="kw">let </span>list = db
    .create_list(MailingList {
        pk: <span class="number">0</span>,
        name: <span class="string">&quot;foobar chat&quot;</span>.into(),
        id: <span class="string">&quot;foo-chat&quot;</span>.into(),
        address: <span class="string">&quot;foo-chat@example.com&quot;</span>.into(),
        description: <span class="prelude-val">None</span>,
        archive_url: <span class="prelude-val">None</span>,
    })
    .unwrap();
<span class="kw">let </span>pol = db
    .set_list_subscription_policy(SubscriptionPolicy {
        pk: -<span class="number">1</span>,
        list: list.pk(),
        send_confirmation: <span class="bool-val">false</span>,
        open: <span class="bool-val">true</span>,
        manual: <span class="bool-val">false</span>,
        request: <span class="bool-val">false</span>,
        custom: <span class="bool-val">false</span>,
    })
    .unwrap();
db.remove_list_subscription_policy(list.pk(), pol.pk())
    .unwrap();</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_list_subscription_policy_panic" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#325">source</a><h4 class="code-header">pub fn <a href="#method.remove_list_subscription_policy_panic" class="fn">remove_list_subscription_policy_panic</a>()</h4></section></summary><div class="docblock">
<div class="example-wrap should_panic"><a href="#" class="tooltip" title="This example panics">ⓘ</a><pre class="rust rust-example-rendered"><code>

<span class="kw">let </span>db = Connection::open_or_create_db(config).unwrap().trusted();
db.remove_list_post_policy(<span class="number">1</span>, <span class="number">1</span>).unwrap();</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_list_subscription_policy" class="method"><a class="srclink rightside" href="../../src/mailpot/db/policies.rs.html#328-390">source</a><h4 class="code-header">pub fn <a href="#method.set_list_subscription_policy" class="fn">set_list_subscription_policy</a>(
    &amp;self,
    policy: <a class="struct" href="../models/struct.SubscriptionPolicy.html" title="struct mailpot::models::SubscriptionPolicy">SubscriptionPolicy</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.SubscriptionPolicy.html" title="struct mailpot::models::SubscriptionPolicy">SubscriptionPolicy</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Set the unique post policy for a list.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-6" class="impl"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#133-582">source</a><a href="#impl-Connection-6" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedconstant.SCHEMA" class="associatedconstant"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#139">source</a><h4 class="code-header">pub const <a href="#associatedconstant.SCHEMA" class="constant">SCHEMA</a>: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a> = _</h4></section></summary><div class="docblock"><p>The database schema.</p>
<div class="example-wrap"><pre class="language-sql"><code>PRAGMA foreign_keys = true;
PRAGMA encoding = &#39;UTF-8&#39;;

CREATE TABLE IF NOT EXISTS list (
  pk                    INTEGER PRIMARY KEY NOT NULL,
  name                  TEXT NOT NULL,
  id                    TEXT NOT NULL UNIQUE,
  address               TEXT NOT NULL UNIQUE,
  owner_local_part      TEXT,
  request_local_part    TEXT,
  archive_url           TEXT,
  description           TEXT,
  created               INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified         INTEGER NOT NULL DEFAULT (unixepoch()),
  verify                BOOLEAN CHECK (verify IN (0, 1)) NOT NULL DEFAULT 1,
  hidden                BOOLEAN CHECK (hidden IN (0, 1)) NOT NULL DEFAULT 0,
  enabled               BOOLEAN CHECK (enabled IN (0, 1)) NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS owner (
  pk               INTEGER PRIMARY KEY NOT NULL,
  list             INTEGER NOT NULL,
  address          TEXT NOT NULL,
  name             TEXT,
  created          INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified    INTEGER NOT NULL DEFAULT (unixepoch()),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS post_policy (
  pk                   INTEGER PRIMARY KEY NOT NULL,
  list                 INTEGER NOT NULL UNIQUE,
  announce_only        BOOLEAN CHECK (announce_only IN (0, 1)) NOT NULL
                       DEFAULT 0,
  subscription_only    BOOLEAN CHECK (subscription_only IN (0, 1)) NOT NULL
                       DEFAULT 0,
  approval_needed      BOOLEAN CHECK (approval_needed IN (0, 1)) NOT NULL
                       DEFAULT 0,
  open                 BOOLEAN CHECK (open IN (0, 1)) NOT NULL DEFAULT 0,
  custom               BOOLEAN CHECK (custom IN (0, 1)) NOT NULL DEFAULT 0,
  created              INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified        INTEGER NOT NULL DEFAULT (unixepoch())
  CHECK((
    (custom) OR ((
    (open) OR ((
    (approval_needed) OR ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  )
  AND NOT
  (
    (approval_needed) AND ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  ))
  )
  AND NOT
  (
    (open) AND ((
    (approval_needed) OR ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  )
  AND NOT
  (
    (approval_needed) AND ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  ))
  ))
  )
  AND NOT
  (
    (custom) AND ((
    (open) OR ((
    (approval_needed) OR ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  )
  AND NOT
  (
    (approval_needed) AND ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  ))
  )
  AND NOT
  (
    (open) AND ((
    (approval_needed) OR ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  )
  AND NOT
  (
    (approval_needed) AND ((
    (announce_only) OR (subscription_only)
  )
  AND NOT
  (
    (announce_only) AND (subscription_only)
  ))
  ))
  ))
  )),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS subscription_policy (
  pk                   INTEGER PRIMARY KEY NOT NULL,
  list                 INTEGER NOT NULL UNIQUE,
  send_confirmation    BOOLEAN CHECK (send_confirmation IN (0, 1)) NOT NULL
                       DEFAULT 1,
  open                 BOOLEAN CHECK (open IN (0, 1)) NOT NULL DEFAULT 0,
  manual               BOOLEAN CHECK (manual IN (0, 1)) NOT NULL DEFAULT 0,
  request              BOOLEAN CHECK (request IN (0, 1)) NOT NULL DEFAULT 0,
  custom               BOOLEAN CHECK (custom IN (0, 1)) NOT NULL DEFAULT 0,
  created              INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified        INTEGER NOT NULL DEFAULT (unixepoch()),
  CHECK((
    (open) OR ((
    (manual) OR ((
    (request) OR (custom)
  )
  AND NOT
  (
    (request) AND (custom)
  ))
  )
  AND NOT
  (
    (manual) AND ((
    (request) OR (custom)
  )
  AND NOT
  (
    (request) AND (custom)
  ))
  ))
  )
  AND NOT
  (
    (open) AND ((
    (manual) OR ((
    (request) OR (custom)
  )
  AND NOT
  (
    (request) AND (custom)
  ))
  )
  AND NOT
  (
    (manual) AND ((
    (request) OR (custom)
  )
  AND NOT
  (
    (request) AND (custom)
  ))
  ))
  )),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS subscription (
  pk                      INTEGER PRIMARY KEY NOT NULL,
  list                    INTEGER NOT NULL,
  address                 TEXT NOT NULL,
  name                    TEXT,
  account                 INTEGER,
  enabled                 BOOLEAN CHECK (enabled IN (0, 1)) NOT NULL
                          DEFAULT 1,
  verified                BOOLEAN CHECK (verified IN (0, 1)) NOT NULL
                          DEFAULT 1,
  digest                  BOOLEAN CHECK (digest IN (0, 1)) NOT NULL
                          DEFAULT 0,
  hide_address            BOOLEAN CHECK (hide_address IN (0, 1)) NOT NULL
                          DEFAULT 0,
  receive_duplicates      BOOLEAN CHECK (receive_duplicates IN (0, 1)) NOT NULL
                          DEFAULT 1,
  receive_own_posts       BOOLEAN CHECK (receive_own_posts IN (0, 1)) NOT NULL
                          DEFAULT 0,
  receive_confirmation    BOOLEAN CHECK (receive_confirmation IN (0, 1)) NOT NULL
                          DEFAULT 1,
  last_digest             INTEGER NOT NULL DEFAULT (unixepoch()),
  created                 INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified           INTEGER NOT NULL DEFAULT (unixepoch()),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE,
  FOREIGN KEY (account) REFERENCES account(pk) ON DELETE SET NULL,
  UNIQUE (list, address) ON CONFLICT ROLLBACK
);

CREATE TABLE IF NOT EXISTS account (
  pk               INTEGER PRIMARY KEY NOT NULL,
  name             TEXT,
  address          TEXT NOT NULL UNIQUE,
  public_key       TEXT,
  password         TEXT NOT NULL,
  enabled          BOOLEAN CHECK (enabled IN (0, 1)) NOT NULL DEFAULT 1,
  created          INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified    INTEGER NOT NULL DEFAULT (unixepoch())
);

CREATE TABLE IF NOT EXISTS candidate_subscription (
  pk               INTEGER PRIMARY KEY NOT NULL,
  list             INTEGER NOT NULL,
  address          TEXT NOT NULL,
  name             TEXT,
  accepted         INTEGER UNIQUE,
  created          INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified    INTEGER NOT NULL DEFAULT (unixepoch()),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE,
  FOREIGN KEY (accepted) REFERENCES subscription(pk) ON DELETE CASCADE,
  UNIQUE (list, address) ON CONFLICT ROLLBACK
);

CREATE TABLE IF NOT EXISTS post (
  pk               INTEGER PRIMARY KEY NOT NULL,
  list             INTEGER NOT NULL,
  envelope_from    TEXT,
  address          TEXT NOT NULL,
  message_id       TEXT NOT NULL,
  message          BLOB NOT NULL,
  headers_json     TEXT,
  timestamp        INTEGER NOT NULL DEFAULT (unixepoch()),
  datetime         TEXT NOT NULL DEFAULT (datetime()),
  created          INTEGER NOT NULL DEFAULT (unixepoch())
);

CREATE TABLE IF NOT EXISTS templates (
  pk               INTEGER PRIMARY KEY NOT NULL,
  name             TEXT NOT NULL,
  list             INTEGER,
  subject          TEXT,
  headers_json     TEXT,
  body             TEXT NOT NULL,
  created          INTEGER NOT NULL DEFAULT (unixepoch()),
  last_modified    INTEGER NOT NULL DEFAULT (unixepoch()),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE,
  UNIQUE (list, name) ON CONFLICT ROLLBACK
);

-- # Queues
--
-- ## The &quot;maildrop&quot; queue
--
-- Messages that have been submitted but not yet processed, await processing
-- in the &quot;maildrop&quot; queue. Messages can be added to the &quot;maildrop&quot; queue
-- even when mailpot is not running.
--
-- ## The &quot;deferred&quot; queue
--
-- When all the deliverable recipients for a message are delivered, and for
-- some recipients delivery failed for a transient reason (it might succeed
-- later), the message is placed in the &quot;deferred&quot; queue.
--
-- ## The &quot;hold&quot; queue
--
-- List administrators may introduce rules for emails to be placed
-- indefinitely in the &quot;hold&quot; queue. Messages placed in the &quot;hold&quot; queue stay
-- there until the administrator intervenes. No periodic delivery attempts
-- are made for messages in the &quot;hold&quot; queue.

-- ## The &quot;out&quot; queue
--
-- Emails that must be sent as soon as possible.
CREATE TABLE IF NOT EXISTS queue (
  pk              INTEGER PRIMARY KEY NOT NULL,
  which           TEXT
                  CHECK (
                    which IN
                    (&#39;maildrop&#39;,
                     &#39;hold&#39;,
                     &#39;deferred&#39;,
                     &#39;corrupt&#39;,
                     &#39;error&#39;,
                     &#39;out&#39;)
                  ) NOT NULL,
  list            INTEGER,
  comment         TEXT,
  to_addresses    TEXT NOT NULL,
  from_address    TEXT NOT NULL,
  subject         TEXT NOT NULL,
  message_id      TEXT NOT NULL,
  message         BLOB NOT NULL,
  timestamp       INTEGER NOT NULL DEFAULT (unixepoch()),
  datetime        TEXT NOT NULL DEFAULT (datetime()),
  FOREIGN KEY (list) REFERENCES list(pk) ON DELETE CASCADE,
  UNIQUE (to_addresses, message_id) ON CONFLICT ROLLBACK
);

CREATE TABLE IF NOT EXISTS bounce (
  pk              INTEGER PRIMARY KEY NOT NULL,
  subscription    INTEGER NOT NULL UNIQUE,
  count           INTEGER NOT NULL DEFAULT 0,
  last_bounce     TEXT NOT NULL DEFAULT (datetime()),
  FOREIGN KEY (subscription) REFERENCES subscription(pk) ON DELETE CASCADE
);

CREATE INDEX IF NOT EXISTS post_listpk_idx ON post(list);
CREATE INDEX IF NOT EXISTS post_msgid_idx ON post(message_id);
CREATE INDEX IF NOT EXISTS list_idx ON list(id);
CREATE INDEX IF NOT EXISTS subscription_idx ON subscription(address);

-- [tag:accept_candidate]: Update candidacy with &#39;subscription&#39; foreign key on
-- &#39;subscription&#39; insert.
CREATE TRIGGER IF NOT EXISTS accept_candidate AFTER INSERT ON subscription
FOR EACH ROW
BEGIN
  UPDATE candidate_subscription SET accepted = NEW.pk, last_modified = unixepoch()
  WHERE candidate_subscription.list = NEW.list AND candidate_subscription.address = NEW.address;
END;

-- [tag:verify_subscription_email]: If list settings require e-mail to be
-- verified, update new subscription&#39;s &#39;verify&#39; column value.
CREATE TRIGGER IF NOT EXISTS verify_subscription_email AFTER INSERT ON subscription
FOR EACH ROW
BEGIN
  UPDATE subscription
  SET verified = 0, last_modified = unixepoch()
  WHERE
  subscription.pk = NEW.pk
  AND
  EXISTS
  (SELECT 1 FROM list WHERE pk = NEW.list AND verify = 1);
END;

-- [tag:add_account]: Update list subscription entries with &#39;account&#39; foreign
-- key, if addresses match.
CREATE TRIGGER IF NOT EXISTS add_account AFTER INSERT ON account
FOR EACH ROW
BEGIN
  UPDATE subscription SET account = NEW.pk, last_modified = unixepoch()
  WHERE subscription.address = NEW.address;
END;

-- [tag:add_account_to_subscription]: When adding a new &#39;subscription&#39;, auto
-- set &#39;account&#39; value if there already exists an &#39;account&#39; entry with the
-- same address.
CREATE TRIGGER IF NOT EXISTS add_account_to_subscription
AFTER INSERT ON subscription
FOR EACH ROW
WHEN
  NEW.account IS NULL
  AND EXISTS (SELECT 1 FROM account WHERE address = NEW.address)
BEGIN
  UPDATE subscription
     SET account = (SELECT pk FROM account WHERE address = NEW.address),
         last_modified = unixepoch()
    WHERE subscription.pk = NEW.pk;
END;


-- [tag:last_modified_list]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_list
AFTER UPDATE ON list
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE list SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_owner]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_owner
AFTER UPDATE ON owner
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE owner SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_post_policy]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_post_policy
AFTER UPDATE ON post_policy
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE post_policy SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_subscription_policy]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_subscription_policy
AFTER UPDATE ON subscription_policy
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE subscription_policy SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_subscription]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_subscription
AFTER UPDATE ON subscription
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE subscription SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_account]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_account
AFTER UPDATE ON account
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE account SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_candidate_subscription]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_candidate_subscription
AFTER UPDATE ON candidate_subscription
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE candidate_subscription SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;

-- [tag:last_modified_templates]: update last_modified on every change.
CREATE TRIGGER
IF NOT EXISTS last_modified_templates
AFTER UPDATE ON templates
FOR EACH ROW
WHEN NEW.last_modified != OLD.last_modified
BEGIN
  UPDATE templates SET last_modified = unixepoch()
  WHERE pk = NEW.pk;
END;
</code></pre></div></div></details><details class="toggle method-toggle" open><summary><section id="method.open_db" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#146-176">source</a><h4 class="code-header">pub fn <a href="#method.open_db" class="fn">open_db</a>(conf: <a class="struct" href="../config/struct.Configuration.html" title="struct mailpot::config::Configuration">Configuration</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;Self&gt;</h4></section></summary><div class="docblock"><p>Creates a new database connection.</p>
<p><code>Connection</code> supports a limited subset of operations by default (see
<a href="struct.Connection.html#method.untrusted" title="method mailpot::db::Connection::untrusted"><code>Connection::untrusted</code></a>).
Use <a href="struct.Connection.html#method.trusted" title="method mailpot::db::Connection::trusted"><code>Connection::trusted</code></a> to remove these limits.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.trusted" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#181-187">source</a><h4 class="code-header">pub fn <a href="#method.trusted" class="fn">trusted</a>(self) -&gt; Self</h4></section></summary><div class="docblock"><p>Removes operational limits from this connection. (see
<a href="struct.Connection.html#method.untrusted" title="method mailpot::db::Connection::untrusted"><code>Connection::untrusted</code></a>)</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.untrusted" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#200-203">source</a><h4 class="code-header">pub fn <a href="#method.untrusted" class="fn">untrusted</a>(self) -&gt; Self</h4></section></summary><div class="docblock"><p>Sets operational limits for this connection.</p>
<ul>
<li>Allow <code>INSERT</code>, <code>DELETE</code> only for “queue”, “candidate_subscription”,
“subscription”.</li>
<li>Allow <code>UPDATE</code> only for “subscription” user facing settings.</li>
<li>Allow <code>INSERT</code> only for “post”.</li>
<li>Allow read access to all tables.</li>
<li>Allow <code>SELECT</code>, <code>TRANSACTION</code>, <code>SAVEPOINT</code>, and the <code>strftime</code>
function.</li>
<li>Deny everything else.</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.open_or_create_db" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#206-248">source</a><h4 class="code-header">pub fn <a href="#method.open_or_create_db" class="fn">open_or_create_db</a>(conf: <a class="struct" href="../config/struct.Configuration.html" title="struct mailpot::config::Configuration">Configuration</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;Self&gt;</h4></section></summary><div class="docblock"><p>Create a database if it doesn’t exist and then open it.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.conf" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#251-253">source</a><h4 class="code-header">pub fn <a href="#method.conf" class="fn">conf</a>(&amp;self) -&gt; &amp;<a class="struct" href="../config/struct.Configuration.html" title="struct mailpot::config::Configuration">Configuration</a></h4></section></summary><div class="docblock"><p>Returns a connection’s configuration.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.load_archives" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#256-272">source</a><h4 class="code-header">pub fn <a href="#method.load_archives" class="fn">load_archives</a>(&amp;self) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Loads archive databases from <a href="../config/struct.Configuration.html#structfield.data_path" title="field mailpot::config::Configuration::data_path"><code>Configuration::data_path</code></a>, if any.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.lists" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#275-298">source</a><h4 class="code-header">pub fn <a href="#method.lists" class="fn">lists</a>(&amp;self) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Returns a vector of existing mailing lists.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#301-322">source</a><h4 class="code-header">pub fn <a href="#method.list" class="fn">list</a>(&amp;self, pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch a mailing list by primary key.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_by_id" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#325-348">source</a><h4 class="code-header">pub fn <a href="#method.list_by_id" class="fn">list_by_id</a>&lt;S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;&gt;(
    &amp;self,
    id: S
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch a mailing list by id.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.create_list" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#351-382">source</a><h4 class="code-header">pub fn <a href="#method.create_list" class="fn">create_list</a>(&amp;self, new_val: <a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Create a new list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_posts" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#385-419">source</a><h4 class="code-header">pub fn <a href="#method.list_posts" class="fn">list_posts</a>(
    &amp;self,
    list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>,
    _date_range: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>)&gt;
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.Post.html" title="struct mailpot::models::Post">Post</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch all posts of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_owners" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#422-445">source</a><h4 class="code-header">pub fn <a href="#method.list_owners" class="fn">list_owners</a>(&amp;self, pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListOwner.html" title="struct mailpot::models::ListOwner">ListOwner</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Fetch the owners of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.remove_list_owner" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#448-463">source</a><h4 class="code-header">pub fn <a href="#method.remove_list_owner" class="fn">remove_list_owner</a>(&amp;self, list_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>, owner_pk: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Remove an owner of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_list_owner" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#466-506">source</a><h4 class="code-header">pub fn <a href="#method.add_list_owner" class="fn">add_list_owner</a>(&amp;self, list_owner: <a class="struct" href="../models/struct.ListOwner.html" title="struct mailpot::models::ListOwner">ListOwner</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.ListOwner.html" title="struct mailpot::models::ListOwner">ListOwner</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Add an owner of a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.update_list" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#509-567">source</a><h4 class="code-header">pub fn <a href="#method.update_list" class="fn">update_list</a>(&amp;mut self, change_set: <a class="struct" href="../models/changesets/struct.MailingListChangeset.html" title="struct mailpot::models::changesets::MailingListChangeset">MailingListChangeset</a>) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Update a mailing list.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.list_filters" class="method"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#570-581">source</a><h4 class="code-header">pub fn <a href="#method.list_filters" class="fn">list_filters</a>(
    &amp;self,
    _list: &amp;<a class="struct" href="../models/struct.DbVal.html" title="struct mailpot::models::DbVal">DbVal</a>&lt;<a class="struct" href="../models/struct.MailingList.html" title="struct mailpot::models::MailingList">MailingList</a>&gt;
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../mail/message_filters/trait.PostFilter.html" title="trait mailpot::mail::message_filters::PostFilter">PostFilter</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Return the post filters of a mailing list.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Connection-7" class="impl"><a class="srclink rightside" href="../../src/mailpot/submission.rs.html#30-73">source</a><a href="#impl-Connection-7" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new_smtp_connection" class="method"><a class="srclink rightside" href="../../src/mailpot/submission.rs.html#33-42">source</a><h4 class="code-header">pub fn <a href="#method.new_smtp_connection" class="fn">new_smtp_connection</a>(
    &amp;self
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;SmtpConnection&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Return an SMTP connection handle if the database connection has one
configured.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.submit" class="method"><a class="srclink rightside" href="../../src/mailpot/submission.rs.html#45-72">source</a><h4 class="code-header">pub async fn <a href="#method.submit" class="fn">submit</a>(
    smtp_connection: &amp;mut SmtpConnection,
    message: &amp;<a class="struct" href="queue/struct.QueueEntry.html" title="struct mailpot::db::queue::QueueEntry">QueueEntry</a>,
    dry_run: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>
) -&gt; <a class="type" href="../errors/type.Result.html" title="type mailpot::errors::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Submit queue items from <code>values</code> to their recipients.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Debug-for-Connection" class="impl"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#41-47">source</a><a href="#impl-Debug-for-Connection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#42-46">source</a><a href="#method.fmt" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&amp;self, fmt: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Drop-for-Connection" class="impl"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#49-62">source</a><a href="#impl-Drop-for-Connection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.drop" class="method trait-impl"><a class="srclink rightside" href="../../src/mailpot/db.rs.html#50-61">source</a><a href="#method.drop" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop" class="fn">drop</a>(&amp;mut self)</h4></section></summary><div class='docblock'>Executes the destructor for this type. <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Connection" class="impl"><a href="#impl-RefUnwindSafe-for-Connection" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section><section id="impl-Send-for-Connection" class="impl"><a href="#impl-Send-for-Connection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section><section id="impl-Sync-for-Connection" class="impl"><a href="#impl-Sync-for-Connection" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section><section id="impl-Unpin-for-Connection" class="impl"><a href="#impl-Unpin-for-Connection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section><section id="impl-UnwindSafe-for-Connection" class="impl"><a href="#impl-UnwindSafe-for-Connection" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Connection.html" title="struct mailpot::db::Connection">Connection</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#200">source</a><a href="#impl-Any-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#723">source</a><a href="#impl-From%3CT%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#726">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#707">source</a><a href="#impl-Into%3CU%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#716">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#763">source</a><a href="#impl-TryFrom%3CU%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#770">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Connection" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#748">source</a><a href="#impl-TryInto%3CU%3E-for-Connection" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#755">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>